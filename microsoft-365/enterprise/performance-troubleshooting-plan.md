---
title: Plan de résolution des problèmes de performances pour Office 365
ms.author: kvice
author: kelleyvice-msft
manager: laurawi
ms.date: 5/10/2019
audience: Admin
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
f1.keywords:
- CSH
ms.custom:
- Adm_O365
- seo-marvel-apr2020
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: e241e5d9-b1d8-4f1d-a5c8-4106b7325f8c
ms.collection:
- M365-security-compliance
- Ent_O365
description: Cet article peut vous aider à résoudre les problèmes de performances d’Office 365 et même à résoudre certains des problèmes les plus courants.
ms.openlocfilehash: 4f66ed43df2da47c9ea1931b8508dfecf4546b1c
ms.sourcegitcommit: dffb9b72acd2e0bd286ff7e79c251e7ec6e8ecae
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/17/2020
ms.locfileid: "47948387"
---
# <a name="performance-troubleshooting-plan-for-office-365"></a><span data-ttu-id="120e6-103">Plan de résolution des problèmes de performances pour Office 365</span><span class="sxs-lookup"><span data-stu-id="120e6-103">Performance troubleshooting plan for Office 365</span></span>

<span data-ttu-id="120e6-104">Avez-vous besoin de connaître les étapes à suivre pour identifier et corriger les retards, les hangs et les performances lentes entre SharePoint Online, OneDrive Entreprise, Exchange Online ou Skype Entreprise Online, et votre ordinateur client ?</span><span class="sxs-lookup"><span data-stu-id="120e6-104">Do you need to know the steps to take to identify and fix lags, hangs, and slow performance between SharePoint Online, OneDrive for Business, Exchange Online, or Skype for Business Online, and your client computer?</span></span> <span data-ttu-id="120e6-105">Avant d’appeler le support technique, cet article peut vous aider à résoudre les problèmes de performances d’Office 365 et même à résoudre certains des problèmes les plus courants.</span><span class="sxs-lookup"><span data-stu-id="120e6-105">Before you call support, this article can help you troubleshoot Office 365 performance issues and even fix some of the most common issues.</span></span>

<span data-ttu-id="120e6-106">Cet article est en fait un exemple de plan d’action que vous pouvez utiliser pour capturer des données précieuses sur votre problème de performances en cours.</span><span class="sxs-lookup"><span data-stu-id="120e6-106">This article is actually a sample action plan that you can use to capture valuable data about your performance issue as it's happening.</span></span> <span data-ttu-id="120e6-107">Certains problèmes principaux sont également inclus dans cet article.</span><span class="sxs-lookup"><span data-stu-id="120e6-107">Some top issues are also included in this article.</span></span>

<span data-ttu-id="120e6-108">Si vous débutez avec les performances du réseau et que vous souhaitez planifier à long terme la surveillance des performances entre vos ordinateurs clients et Office 365, jetez un œil à l’optimisation et au dépannage des performances [d’Office 365 :](performance-tuning-using-baselines-and-history.md)administrateur et professionnel de l’informatique.</span><span class="sxs-lookup"><span data-stu-id="120e6-108">If you're new to network performance and want to make a long term plan to monitor performance between your client machines and Office 365, take a look at [Office 365 performance tuning and troubleshooting - Admin and IT Pro](performance-tuning-using-baselines-and-history.md).</span></span>

## <a name="sample-performance-troubleshooting-action-plan"></a><span data-ttu-id="120e6-109">Exemple de plan d’action de résolution des problèmes de performances</span><span class="sxs-lookup"><span data-stu-id="120e6-109">Sample performance troubleshooting action plan</span></span>

<span data-ttu-id="120e6-110">Ce plan d’action comprend deux parties : une phase de préparation et une phase de journalisation;</span><span class="sxs-lookup"><span data-stu-id="120e6-110">This action plan contains two parts; a preparation phase, and a logging phase.</span></span> <span data-ttu-id="120e6-111">Si vous avez un problème de performances pour l’instant et que vous devez faire la collecte de données, vous pouvez commencer à utiliser ce plan immédiatement.</span><span class="sxs-lookup"><span data-stu-id="120e6-111">If you have a performance problem right now, and you need to do data collection, you can start using this plan right away.</span></span>

### <a name="prepare-the-client-computer"></a><span data-ttu-id="120e6-112">Préparer l’ordinateur client</span><span class="sxs-lookup"><span data-stu-id="120e6-112">Prepare the client computer</span></span>

- <span data-ttu-id="120e6-113">Recherchez un ordinateur client qui peut reproduire le problème de performances.</span><span class="sxs-lookup"><span data-stu-id="120e6-113">Find a client computer that can reproduce the performance problem.</span></span> <span data-ttu-id="120e6-114">Cet ordinateur sera utilisé pendant le dépannage.</span><span class="sxs-lookup"><span data-stu-id="120e6-114">This computer will be used during the course of troubleshooting.</span></span>
- <span data-ttu-id="120e6-115">Notez les étapes qui provoquent le problème de performances afin que vous soyez prêt au moment du test.</span><span class="sxs-lookup"><span data-stu-id="120e6-115">Write down the steps that cause the performance problem to happen so you're ready when it comes time to test.</span></span>
- <span data-ttu-id="120e6-116">Installez les outils de collecte et d’enregistrement des informations :</span><span class="sxs-lookup"><span data-stu-id="120e6-116">Install tools for gathering and recording information:</span></span>
  - <span data-ttu-id="120e6-117">Installez [Netmon 3.4 (ou](https://www.microsoft.com/download/details.aspx?id=4865) utilisez un outil de suivi réseau équivalent).</span><span class="sxs-lookup"><span data-stu-id="120e6-117">Install [Netmon 3.4](https://www.microsoft.com/download/details.aspx?id=4865) (or use an equivalent network tracing tool).</span></span>
  - <span data-ttu-id="120e6-118">Installez l’édition gratuite Basic Edition de [HTTPWatch](https://www.httpwatch.com/download/) (ou utilisez un outil de suivi réseau équivalent).</span><span class="sxs-lookup"><span data-stu-id="120e6-118">Install the free Basic Edition of [HTTPWatch](https://www.httpwatch.com/download/) (or use an equivalent network Tracing tool).</span></span>
  - <span data-ttu-id="120e6-119">Utilisez un enregistreur d’écran ou exécutez l’enregistreur d’étapes (PSR.exe) qui est livré avec Windows Vista et ultérieur, afin de garder un enregistrement des étapes que vous prenez pendant le test.</span><span class="sxs-lookup"><span data-stu-id="120e6-119">Use a screen recorder or run the Steps Recorder (PSR.exe) that comes with Windows Vista and later, in order to keep a record of the steps you take during testing.</span></span>

### <a name="log-the-performance-issue"></a><span data-ttu-id="120e6-120">Enregistrer le problème de performances</span><span class="sxs-lookup"><span data-stu-id="120e6-120">Log the performance issue</span></span>

- <span data-ttu-id="120e6-121">Fermez tous les navigateurs Internet en trop.</span><span class="sxs-lookup"><span data-stu-id="120e6-121">Close all extraneous Internet browsers.</span></span>
- <span data-ttu-id="120e6-122">Démarrez l’enregistreur d’étapes ou un autre enregistreur d’écran.</span><span class="sxs-lookup"><span data-stu-id="120e6-122">Start the Steps Recorder, or another screen recorder.</span></span>
- <span data-ttu-id="120e6-123">Démarrez votre capture Netmon (ou outil de suivi réseau).</span><span class="sxs-lookup"><span data-stu-id="120e6-123">Start your Netmon capture (or network tracing tool).</span></span>
- <span data-ttu-id="120e6-124">Clear your DNS cache on the client computer from the command line by typing ipconfig /flushdns.</span><span class="sxs-lookup"><span data-stu-id="120e6-124">Clear your DNS cache on the client computer from the command line by typing ipconfig /flushdns.</span></span>
- <span data-ttu-id="120e6-125">Démarrez une nouvelle session de navigateur et activer HTTPWatch.</span><span class="sxs-lookup"><span data-stu-id="120e6-125">Start a new browser session and turn on HTTPWatch.</span></span>
- <span data-ttu-id="120e6-126">Facultatif : si vous testez Exchange Online, exécutez l’outil Analyseur de performances du client Exchange à partir de la console d’administration Office 365.</span><span class="sxs-lookup"><span data-stu-id="120e6-126">Optional: If you are testing Exchange Online, run the Exchange Client Performance Analyzer tool from the Office 365 admin console.</span></span>
- <span data-ttu-id="120e6-127">Reproduisez les étapes exactes à l’origine du problème de performances.</span><span class="sxs-lookup"><span data-stu-id="120e6-127">Reproduce the exact steps that cause the performance issue.</span></span>
- <span data-ttu-id="120e6-128">Arrêtez la trace de votre netmon ou d’un autre outil.</span><span class="sxs-lookup"><span data-stu-id="120e6-128">Stop your Netmon or other tool's trace.</span></span>
- <span data-ttu-id="120e6-129">Sur la ligne de commande, exécutez un itinéraire de suivi vers votre abonnement Office 365 en tapant la commande suivante, puis en appuyant sur Entrée :</span><span class="sxs-lookup"><span data-stu-id="120e6-129">At the command line, run a trace route to your Office 365 subscription by typing the following command and then pressing ENTER:</span></span>

  ``` cmd
  tracert <subscriptionname>.onmicrosoft.com
  ```

- <span data-ttu-id="120e6-130">Arrêtez l’enregistreur d’étapes et enregistrez la vidéo.</span><span class="sxs-lookup"><span data-stu-id="120e6-130">Stop the Steps Recorder and save the video.</span></span> <span data-ttu-id="120e6-131">N’oubliez pas d’inclure la date et l’heure de la capture et de savoir si les performances sont bonnes ou mauvaises.</span><span class="sxs-lookup"><span data-stu-id="120e6-131">Be sure to include the date and time of the capture and whether it demonstrates good or bad performance.</span></span>
- <span data-ttu-id="120e6-132">Enregistrez les fichiers de suivi.</span><span class="sxs-lookup"><span data-stu-id="120e6-132">Save the trace files.</span></span> <span data-ttu-id="120e6-133">Là encore, n’oubliez pas d’inclure la date et l’heure de la capture et de savoir si les performances sont bonnes ou mauvaises.</span><span class="sxs-lookup"><span data-stu-id="120e6-133">Again, be sure to include the date and time of the capture and whether it demonstrates good or bad performance.</span></span>

<span data-ttu-id="120e6-134">Si vous n’êtes pas familiarisé avec l’exécution des outils mentionnés dans cet article, ne vous inquiétez pas, car nous fournissons ces étapes ci-après.</span><span class="sxs-lookup"><span data-stu-id="120e6-134">If you're not familiar with running the tools mentioned in this article, don't worry because we provide those steps next.</span></span> <span data-ttu-id="120e6-135">Si vous êtes habitué à ce type de capture réseau, vous pouvez passer à La collecte des lignes de [base,](performance-tuning-using-baselines-and-history.md#how-to-collect-baselines)qui décrit le filtrage et la lecture des journaux.</span><span class="sxs-lookup"><span data-stu-id="120e6-135">If you're accustomed to doing this kind of network capturing, you can skip to [How to collect baselines](performance-tuning-using-baselines-and-history.md#how-to-collect-baselines), which describes filtering and reading the logs.</span></span>

### <a name="flush-the-dns-cache-first"></a><span data-ttu-id="120e6-136">Vider d’abord le cache DNS</span><span class="sxs-lookup"><span data-stu-id="120e6-136">Flush the DNS Cache first</span></span>

<span data-ttu-id="120e6-137">Pourquoi ?</span><span class="sxs-lookup"><span data-stu-id="120e6-137">Why?</span></span> <span data-ttu-id="120e6-138">En purgeant le cache DNS, vous démarrez vos tests avec une nouvelle tablette.</span><span class="sxs-lookup"><span data-stu-id="120e6-138">By flushing out the DNS cache you're starting your tests with a clean slate.</span></span> <span data-ttu-id="120e6-139">En effavant le cache, vous réinitiaiaz le contenu du résolveur DNS aux entrées les plus à jour.</span><span class="sxs-lookup"><span data-stu-id="120e6-139">By clearing the cache, you're resetting the DNS resolver contents to the most up-to-date entries.</span></span> <span data-ttu-id="120e6-140">N’oubliez pas qu’un flush ne supprime pas les entrées de fichier HOSTs.</span><span class="sxs-lookup"><span data-stu-id="120e6-140">Remember that a flush does not remove HOSTs file entries.</span></span> <span data-ttu-id="120e6-141">Si vous utilisez des entrées de fichier HOST de manière intensive, vous devez copier ces entrées dans un fichier dans un autre répertoire, puis vider le fichier HÔTE.</span><span class="sxs-lookup"><span data-stu-id="120e6-141">If you use HOST file entries extensively, you should copy those entries out to a file in another directory and then empty the HOST file.</span></span>

#### <a name="flush-your-dns-resolver-cache"></a><span data-ttu-id="120e6-142">Vider votre cache de résolution DNS</span><span class="sxs-lookup"><span data-stu-id="120e6-142">Flush your DNS resolver cache</span></span>

1. <span data-ttu-id="120e6-143">Ouvrez l’invite  de commandes (cmd Démarrer \> **l’exécuter** \>  ou cmd **de touche Windows).** \> </span><span class="sxs-lookup"><span data-stu-id="120e6-143">Open the command prompt, (either **Start** \> **Run** \> **cmd** or **Windows key** \> **cmd**).</span></span>
2. <span data-ttu-id="120e6-144">Tapez la commande suivante, puis appuyez sur Entrée :</span><span class="sxs-lookup"><span data-stu-id="120e6-144">Type the following command and press ENTER:</span></span>

    ``` cmd
    ipconfig /flushdns
    ```

## <a name="netmon"></a><span data-ttu-id="120e6-145">Netmon</span><span class="sxs-lookup"><span data-stu-id="120e6-145">Netmon</span></span>

<span data-ttu-id="120e6-146">L’outil Surveillance du réseau[(Netmon)](https://www.microsoft.com/download/details.aspx?id=4865)de Microsoft analyse les paquets, c’est-à-dire le trafic, qui transite entre les ordinateurs sur les réseaux.</span><span class="sxs-lookup"><span data-stu-id="120e6-146">Microsoft's Network Monitoring tool ([Netmon](https://www.microsoft.com/download/details.aspx?id=4865)) analyzes packets, that is traffic, that passes between computers on networks.</span></span> <span data-ttu-id="120e6-147">En utilisant Netmon pour suivre le trafic avec Office 365, vous pouvez capturer, afficher et lire les en-têtes de paquets, identifier les appareils intermédiaires, vérifier les paramètres importants sur le matériel réseau, rechercher les paquets supprimés et suivre le flux de trafic entre les ordinateurs de votre réseau d’entreprise et Office 365.</span><span class="sxs-lookup"><span data-stu-id="120e6-147">By using Netmon to trace traffic with Office 365 you can capture, view, and read packet headers, identify intervening devices, check important settings on network hardware, look for dropped packets, and follow the flow of traffic between computers on your corporate network and Office 365.</span></span> <span data-ttu-id="120e6-148">Étant donné que le corps réel du trafic est chiffré, c’est-à-dire qu’il (circule sur le port 443 via SSL/TLS), vous ne pouvez pas lire les fichiers envoyés.</span><span class="sxs-lookup"><span data-stu-id="120e6-148">Because the actual body of the traffic is encrypted, that is, it(travels on port 443 via SSL/TLS, you can't read the files being sent.</span></span> <span data-ttu-id="120e6-149">Au lieu de cela, vous obtenez une trace non filtrée du chemin d’accès que prend le paquet, ce qui peut vous aider à suivre le comportement du problème.</span><span class="sxs-lookup"><span data-stu-id="120e6-149">Instead, you get an unfiltered trace of the path that the packet takes which can help you track down the problem behavior.</span></span>

<span data-ttu-id="120e6-150">Assurez-vous que vous n’appliquez pas de filtre pour le moment.</span><span class="sxs-lookup"><span data-stu-id="120e6-150">Be sure you don't apply a filter at this time.</span></span> <span data-ttu-id="120e6-151">Exécutez plutôt les étapes et démontrez le problème avant d’arrêter le suivi et d’enregistrer.</span><span class="sxs-lookup"><span data-stu-id="120e6-151">Instead, run through the steps and demonstrate the problem before stopping the trace and saving.</span></span>

<span data-ttu-id="120e6-152">Après avoir installé Netmon 3.4, ouvrez l’outil et prenez les mesures suivantes :</span><span class="sxs-lookup"><span data-stu-id="120e6-152">After you install Netmon 3.4, open the tool and take these steps:</span></span>

### <a name="take-a-netmon-trace-and-reproduce-the-issue"></a><span data-ttu-id="120e6-153">Suivre Netmon et reproduire le problème</span><span class="sxs-lookup"><span data-stu-id="120e6-153">Take a Netmon trace and reproduce the issue</span></span>

1. <span data-ttu-id="120e6-154">Lancez Netmon 3.4.</span><span class="sxs-lookup"><span data-stu-id="120e6-154">Launch Netmon 3.4.</span></span>
<span data-ttu-id="120e6-155">Il existe trois volets sur la **page** de démarrage : **Captures récentes,** Sélectionner des réseaux **et** prise en compte de Microsoft Network **Monitor 3.4. Remarque**.</span><span class="sxs-lookup"><span data-stu-id="120e6-155">There are three panes on the **Start** page: **Recent Captures**, **Select Networks**, and the **Getting Started with Microsoft Network Monitor 3.4. Notice**.</span></span> <span data-ttu-id="120e6-156">Le panneau Sélectionner les réseaux vous donne également une liste des réseaux par défaut à partir des lesquels vous pouvez capturer.</span><span class="sxs-lookup"><span data-stu-id="120e6-156">The Select Networks panel will also give you a list of the default networks from which you can capture.</span></span> <span data-ttu-id="120e6-157">Assurez-vous que les cartes réseau sont sélectionnées ici.</span><span class="sxs-lookup"><span data-stu-id="120e6-157">Be sure that network cards are selected here.</span></span>

2. <span data-ttu-id="120e6-158">Cliquez **sur Nouvelle capture** en haut de la page **de** démarrage.</span><span class="sxs-lookup"><span data-stu-id="120e6-158">Click **New Capture** at the top of the **Start** page.</span></span> <span data-ttu-id="120e6-159">Cela ajoute un nouvel onglet à côté de **l’onglet** de la page de démarrage appelé **Capture 1**.</span><span class="sxs-lookup"><span data-stu-id="120e6-159">This adds a new tab beside the **Start** page tab called **Capture 1**.</span></span>
<span data-ttu-id="120e6-160">![Interface utilisateur de Netmon avec les boutons Nouvelle capture, Démarrer et Arrêter mis en évidence.](../media/d4527d84-62ec-4301-82d5-e0166ff71f20.PNG)</span><span class="sxs-lookup"><span data-stu-id="120e6-160">![Netmon's user interface with the New Capture, Start, and Stop buttons highlighted.](../media/d4527d84-62ec-4301-82d5-e0166ff71f20.PNG)</span></span>

3. <span data-ttu-id="120e6-161">Pour prendre une capture simple, cliquez sur **Démarrer** dans la barre d’outils.</span><span class="sxs-lookup"><span data-stu-id="120e6-161">To take a simple capture, click **Start** on the toolbar.</span></span>

4. <span data-ttu-id="120e6-162">Reproduisez les étapes qui présentent un problème de performances.</span><span class="sxs-lookup"><span data-stu-id="120e6-162">Reproduce the steps that present a performance issue.</span></span>

5. <span data-ttu-id="120e6-163">Cliquez **sur Arrêter** le \> **fichier** Enregistrer \> **sous**.</span><span class="sxs-lookup"><span data-stu-id="120e6-163">Click **Stop** \> **File** \> **Save As**.</span></span> <span data-ttu-id="120e6-164">N’oubliez pas de donner la date et l’heure avec le fuseau horaire et de mentionner s’il montre des performances mauvaises ou bonnes.</span><span class="sxs-lookup"><span data-stu-id="120e6-164">Remember to give the date and time with the time zone and to mention if it demonstrates bad or good performance.</span></span>

## <a name="httpwatch"></a><span data-ttu-id="120e6-165">HTTPWatch</span><span class="sxs-lookup"><span data-stu-id="120e6-165">HTTPWatch</span></span>

<span data-ttu-id="120e6-166">[HTTPWatch est](https://www.httpwatch.com/download/) facturé et une édition gratuite.</span><span class="sxs-lookup"><span data-stu-id="120e6-166">[HTTPWatch](https://www.httpwatch.com/download/) comes in charged, and a free edition.</span></span> <span data-ttu-id="120e6-167">L’édition Basic Edition gratuite couvre tout ce dont vous avez besoin pour ce test.</span><span class="sxs-lookup"><span data-stu-id="120e6-167">The free Basic Edition covers everything you need for this test.</span></span> <span data-ttu-id="120e6-168">HTTPWatch surveille le trafic réseau et le temps de chargement des pages directement à partir de la fenêtre de votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="120e6-168">HTTPWatch monitors network traffic and page load time right from your browser window.</span></span> <span data-ttu-id="120e6-169">HTTPWatch est un plug-in d’Internet Explorer qui décrit graphiquement les performances.</span><span class="sxs-lookup"><span data-stu-id="120e6-169">HTTPWatch is a plug-in to Internet Explorer that graphically describes performance.</span></span> <span data-ttu-id="120e6-170">L’analyse peut être enregistrée et vue dans HTTPWatch Studio.</span><span class="sxs-lookup"><span data-stu-id="120e6-170">The analysis can be saved and viewed in HTTPWatch Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="120e6-171">Si vous utilisez un autre navigateur, tel que Firefox, Google Chrome ou si vous ne pouvez pas installer HTTPWatch dans Internet Explorer, ouvrez une nouvelle fenêtre de navigateur et appuyez sur F12 sur votre clavier.</span><span class="sxs-lookup"><span data-stu-id="120e6-171">If you use another browser, such as Firefox, Google Chrome, or if you can't install HTTPWatch in Internet Explorer, open a new browser window and press F12 on your keyboard.</span></span> <span data-ttu-id="120e6-172">L’outil de développement doit apparaître en bas de votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="120e6-172">You should see the Developer Tool pop-up at the bottom of your browser.</span></span> <span data-ttu-id="120e6-173">Si vous utilisez Opera, appuyez sur Ctrl+Shift+I pour l’inspecteur web, puis cliquez sur l’onglet Réseau et terminez le test décrit ci-dessous. </span><span class="sxs-lookup"><span data-stu-id="120e6-173">If you use Opera, press CTRL+SHIFT+I for Web Inspector, then click the **Network** tab and complete the testing outlined below.</span></span> <span data-ttu-id="120e6-174">Les informations seront légèrement différentes, mais les temps de chargement seront toujours affichés en millisecondes.</span><span class="sxs-lookup"><span data-stu-id="120e6-174">The information will be slightly different, but load times will still be displayed in milliseconds.</span></span> <span data-ttu-id="120e6-175">> HTTPWatch est également très utile pour les problèmes de temps de chargement de page SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="120e6-175">> HTTPWatch is also very useful for issues with SharePoint Online page load times.</span></span>

### <a name="run-httpwatch-and-reproduce-the-issue"></a><span data-ttu-id="120e6-176">Exécuter HTTPWatch et reproduire le problème</span><span class="sxs-lookup"><span data-stu-id="120e6-176">Run HTTPWatch and reproduce the issue</span></span>

<span data-ttu-id="120e6-177">HTTPWatch est un plug-in de navigateur. L’exposition de l’outil dans le navigateur est donc légèrement différente pour chaque version d’Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="120e6-177">HTTPWatch is a browser plug-in, so exposing the tool in the browser is slightly different for each version of Internet Explorer.</span></span> <span data-ttu-id="120e6-178">En règle générale, vous pouvez trouver HTTPWatch sous la barre Commandes dans le navigateur Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="120e6-178">Typically, you can find HTTPWatch under the Commands bar in the Internet Explorer browser.</span></span> <span data-ttu-id="120e6-179">Si vous ne voyez pas le plug-in HTTPWatch dans la fenêtre de  votre navigateur, vérifiez la version de votre navigateur en cliquant sur Aide à propos d’Internet Explorer ou dans les versions ultérieures d’Internet Explorer, cliquez sur le symbole d’engrenage et À propos \>  **d’Internet Explorer.**</span><span class="sxs-lookup"><span data-stu-id="120e6-179">If you don't see the HTTPWatch plug-in in your browser window, check the version of your browser by clicking **Help** \> **About**, or in later versions of Internet Explorer, click the gear symbol and **About Internet Explorer**.</span></span> <span data-ttu-id="120e6-180">Pour lancer la **barre Commandes,** cliquez avec le bouton droit sur la barre de menus dans Internet Explorer, puis cliquez **sur Barre de commandes.**</span><span class="sxs-lookup"><span data-stu-id="120e6-180">To launch the **Commands** bar, right-click the menu bar in Internet Explorer and click **Commands bar**.</span></span>

<span data-ttu-id="120e6-181">Dans le passé, HTTPWatch était associé à la fois aux barres Commands et Explorer, donc une fois l’installation installée, si vous ne voyez pas immédiatement l’icône (même après le redémarrage) vérifier Outils et vos barres d’outils pour l’icône.</span><span class="sxs-lookup"><span data-stu-id="120e6-181">In the past, HTTPWatch has been associated with both the Commands and the Explorer bars, so once you install, if you don't immediately see the icon (even after reboot) check **Tools**, and your toolbars for the icon.</span></span> <span data-ttu-id="120e6-182">N’oubliez pas que les barres d’outils peuvent être personnalisées et que des options peuvent y être ajoutées.</span><span class="sxs-lookup"><span data-stu-id="120e6-182">Remember that toolbars can be customized and options can be added to them.</span></span>

![Barre d’outils Commande d’Internet Explorer avec l’icône HTTPWatch affichée.](../media/198590b0-d7b1-4bff-a6ad-e4ec3a1e83df.png)

1. <span data-ttu-id="120e6-184">Lancez HTTPWatch dans une fenêtre de navigateur Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="120e6-184">Launch HTTPWatch in an Internet Explorer browser window.</span></span> <span data-ttu-id="120e6-185">Elle apparaîtra ancre dans le navigateur au bas de cette fenêtre.</span><span class="sxs-lookup"><span data-stu-id="120e6-185">It will appear docked to the browser at the bottom of that window.</span></span> <span data-ttu-id="120e6-186">Cliquez **sur Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="120e6-186">Click **Record**.</span></span>

2. <span data-ttu-id="120e6-187">Reproduisez les étapes exactes impliquées dans le problème de performances.</span><span class="sxs-lookup"><span data-stu-id="120e6-187">Reproduce the exact steps involved in the performance issue.</span></span> <span data-ttu-id="120e6-188">Cliquez sur **le bouton** Arrêter dans HTTPWatch.</span><span class="sxs-lookup"><span data-stu-id="120e6-188">Click the **Stop** button in HTTPWatch.</span></span>

3. <span data-ttu-id="120e6-189">**Enregistrez** httpWatch ou **Envoyer par courrier électronique.**</span><span class="sxs-lookup"><span data-stu-id="120e6-189">**Save** the HTTPWatch or **Send by Email**.</span></span> <span data-ttu-id="120e6-190">N’oubliez pas de nommer le fichier de sorte qu’il inclut des informations de date et d’heure et une indication de si votre surveillance contient une démonstration de bonnes ou de mauvaises performances.</span><span class="sxs-lookup"><span data-stu-id="120e6-190">Remember to name the file so that it includes date and time information and an indication of whether your Watch contains a demonstration of good or bad performance.</span></span>

![HTTPWatch affichant l’onglet Réseau pour le chargement de la page d’accueil Office 365.](../media/021a2c64-d581-49fd-adf4-4c364f589d75.PNG)

<span data-ttu-id="120e6-192">Cette capture d’écran est à partir de la version professionnelle de HTTPWatch.</span><span class="sxs-lookup"><span data-stu-id="120e6-192">This screen shot is from the Professional version of HTTPWatch.</span></span> <span data-ttu-id="120e6-193">Vous pouvez ouvrir les suivis pris dans la version de base sur un ordinateur avec une version Professionnel et le lire à cet ordinateur.</span><span class="sxs-lookup"><span data-stu-id="120e6-193">You can open traces taken in the Basic Version on a computer with a Professional version and read it there.</span></span> <span data-ttu-id="120e6-194">Des informations supplémentaires peuvent être disponibles à partir du suivi par le biais de cette méthode.</span><span class="sxs-lookup"><span data-stu-id="120e6-194">Extra information may be available from the trace through that method.</span></span>

## <a name="problem-steps-recorder"></a><span data-ttu-id="120e6-195">Enregistreur d’étapes du problème</span><span class="sxs-lookup"><span data-stu-id="120e6-195">Problem Steps Recorder</span></span>

<span data-ttu-id="120e6-196">L’enregistreur d'PSR.exe vous permet d’enregistrer les problèmes au cours de leur survenue.</span><span class="sxs-lookup"><span data-stu-id="120e6-196">Steps Recorder, or PSR.exe, allows you to record issues as they are occurring.</span></span> <span data-ttu-id="120e6-197">Il s’agit d’un outil très utile et très simple à exécuter.</span><span class="sxs-lookup"><span data-stu-id="120e6-197">It's a very useful tool and very simple to run.</span></span>

### <a name="run-problem-steps-recorder-psrexe-to-record-your-work"></a><span data-ttu-id="120e6-198">Exécuter l’Enregistreur d’étapes PSR.exe pour enregistrer votre travail</span><span class="sxs-lookup"><span data-stu-id="120e6-198">Run Problem Steps Recorder (PSR.exe) to record your work</span></span>

1. <span data-ttu-id="120e6-199">Utilisez le type **Démarrer** \> **l'PSR.exe** OK ou cliquez sur le type de touche \>  \>  **Windows** \> **PSR.exe** \> puis appuyez sur Entrée.</span><span class="sxs-lookup"><span data-stu-id="120e6-199">Either use **Start** \> **Run** \> type **PSR.exe** \> **OK**, or, click the **Windows Key** \> type **PSR.exe** \> and then press ENTER.</span></span>

2. <span data-ttu-id="120e6-200">Lorsque la petite fenêtre PSR.exe s’affiche, cliquez sur **Démarrer** l’enregistrement et reproduisez les étapes qui reproduisent le problème de performances.</span><span class="sxs-lookup"><span data-stu-id="120e6-200">When the small PSR.exe window appears, click **Start Record** and reproduce the steps that reproduce the performance issue.</span></span> <span data-ttu-id="120e6-201">Vous pouvez ajouter des commentaires selon vos besoins en cliquant sur **Ajouter des commentaires.**</span><span class="sxs-lookup"><span data-stu-id="120e6-201">You can add comments as needed, by clicking **Add Comments**.</span></span>

3. <span data-ttu-id="120e6-202">Cliquez **sur Arrêter l’enregistrement** lorsque vous avez terminé les étapes.</span><span class="sxs-lookup"><span data-stu-id="120e6-202">Click **Stop Record** when you have completed the steps.</span></span> <span data-ttu-id="120e6-203">Si le problème de performances est un rendu de page, attendez que la page s’restituer avant d’arrêter l’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="120e6-203">If the performance issue is a page render, wait for the page to render before you stop the recording.</span></span>

4. <span data-ttu-id="120e6-204">Cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="120e6-204">Click **Save**.</span></span>

![Capture d’écran de l’enregistreur d’étapes PSR.exe.](../media/8542b0aa-a3ff-4718-8dc4-43f5521c6c34.PNG)

<span data-ttu-id="120e6-206">La date et l’heure sont enregistrées pour vous.</span><span class="sxs-lookup"><span data-stu-id="120e6-206">The date and time is recorded for you.</span></span> <span data-ttu-id="120e6-207">Cela lie votre PSR à votre suivi Netmon et HTTPWatch dans le temps, et facilite le dépannage de précision.</span><span class="sxs-lookup"><span data-stu-id="120e6-207">This links your PSR to your Netmon trace and HTTPWatch in time, and helps with precision troubleshooting.</span></span> <span data-ttu-id="120e6-208">La date et l’heure dans l’enregistrement PSR peuvent montrer qu’une minute s’est écoulée entre la connexion et la navigation de l’URL et le rendu partiel du site d’administration, par exemple.</span><span class="sxs-lookup"><span data-stu-id="120e6-208">The date and time in the PSR record can show that a minute passed between the login and browsing of the URL and the partial render of the admin site, for example.</span></span>

## <a name="read-your-traces"></a><span data-ttu-id="120e6-209">Lire vos suivis</span><span class="sxs-lookup"><span data-stu-id="120e6-209">Read your traces</span></span>

<span data-ttu-id="120e6-210">Il n’est pas possible d’enseigner tout ce que quelqu’un doit savoir sur le dépannage du réseau et des performances via un article.</span><span class="sxs-lookup"><span data-stu-id="120e6-210">It isn't possible to teach everything about network and performance troubleshooting that someone would need to know via an article.</span></span> <span data-ttu-id="120e6-211">L’obtention de bonnes performances prend de l’expérience et une connaissance du fonctionnement et des performances de votre réseau.</span><span class="sxs-lookup"><span data-stu-id="120e6-211">Getting good at performance takes experience, and knowledge of how your network works and usually performs.</span></span> <span data-ttu-id="120e6-212">Toutefois, il est possible d’arrondir une liste des principaux problèmes et de montrer comment les outils peuvent vous aider à éliminer plus facilement les problèmes les plus courants.</span><span class="sxs-lookup"><span data-stu-id="120e6-212">But it is possible to round up a list of top issues and show how tools can make it easier for you to eliminate the most common problems.</span></span>

<span data-ttu-id="120e6-213">Si vous souhaitez acquérir des compétences en lecture de suivis réseau pour vos sites Office 365, il n’y a pas de meilleur enseignant que de créer régulièrement des suivis de chargements de page et d’acquérir de l’expérience en les lisant.</span><span class="sxs-lookup"><span data-stu-id="120e6-213">If you want to pick up skills reading network traces for your Office 365 sites, there is no better teacher than creating traces of page loads regularly and gaining experience reading them.</span></span> <span data-ttu-id="120e6-214">Par exemple, lorsque vous en avez la possibilité, chargez un service Office 365 et tracez le processus.</span><span class="sxs-lookup"><span data-stu-id="120e6-214">For example, when you have a chance, load an Office 365 service and trace the process.</span></span> <span data-ttu-id="120e6-215">Filtrez le suivi du trafic DNS ou recherchez dans FrameData le nom du service que vous avez parcouru.</span><span class="sxs-lookup"><span data-stu-id="120e6-215">Filter the trace for DNS traffic, or search the FrameData for the name of the service you browsed.</span></span> <span data-ttu-id="120e6-216">Analysez le suivi pour avoir une idée des étapes qui se produisent lors du chargement du service.</span><span class="sxs-lookup"><span data-stu-id="120e6-216">Scan the trace to get an idea of the steps that occur when the service loads.</span></span> <span data-ttu-id="120e6-217">Cela vous aidera à découvrir à quoi doit ressembler le chargement normal de la page, et dans le cas d’un dépannage, en particulier en ce qui concerne les performances, la comparaison de suivis bons à mauvais peut vous apprendre beaucoup.</span><span class="sxs-lookup"><span data-stu-id="120e6-217">This will help you learn what normal page load should look like, and in the case of troubleshooting, particularly around performance, comparing good to bad traces can teach you a lot.</span></span>

<span data-ttu-id="120e6-218">Netmon utilise Microsoft Intellisense dans le champ De filtre d’affichage.</span><span class="sxs-lookup"><span data-stu-id="120e6-218">Netmon uses Microsoft Intellisense in the Display filter field.</span></span> <span data-ttu-id="120e6-219">IntelliSense, ou fin intelligente du code, est cette astuce où vous tapez un point et toutes les options disponibles sont affichées dans une zone de sélection de la zone de sélection de la zone de présentation.</span><span class="sxs-lookup"><span data-stu-id="120e6-219">Intellisense, or intelligent code completion, is that trick where you type in a period and all available options are displayed in a drop-down selection box.</span></span> <span data-ttu-id="120e6-220">Si, par exemple, vous êtes préoccupé par la mise à l’échelle de la fenêtre TCP, vous pouvez trouver votre chemin d’accès à un filtre (par  `.protocol.tcp.window < 100` exemple) par cette voie.</span><span class="sxs-lookup"><span data-stu-id="120e6-220">If, for example, you are worried about TCP window scaling, you can find your way to a filter (such as  `.protocol.tcp.window < 100`) by this means.</span></span>

![Capture d’écran de Netmon montrant que le champ Filtre d’affichage utilise intellisense.](../media/75a56c11-9a60-47ee-a100-aabdfb1ba10f.PNG)

<span data-ttu-id="120e6-222">Netmon traces can have a lot of traffic in them.</span><span class="sxs-lookup"><span data-stu-id="120e6-222">Netmon traces can have a lot of traffic in them.</span></span> <span data-ttu-id="120e6-223">Si vous n’avez pas l’expérience de les lire, il est probable que vous serez submergé d’ouvrir le suivi la première fois.</span><span class="sxs-lookup"><span data-stu-id="120e6-223">If you aren't experienced with reading them, it's likely you will be overwhelmed opening the trace the first time.</span></span> <span data-ttu-id="120e6-224">La première chose à faire est de séparer le signal du bruit de fond dans le suivi.</span><span class="sxs-lookup"><span data-stu-id="120e6-224">The first thing to do is separate the signal from the background noise in the trace.</span></span> <span data-ttu-id="120e6-225">Vous avez testé office 365 et c’est le trafic que vous voulez voir.</span><span class="sxs-lookup"><span data-stu-id="120e6-225">You tested against Office 365, and that's the traffic you want to see.</span></span> <span data-ttu-id="120e6-226">Si vous êtes habitué à naviguer dans les traces, vous n’avez peut-être pas besoin de cette liste.</span><span class="sxs-lookup"><span data-stu-id="120e6-226">If you are used to navigating through traces, you may not need this list.</span></span>

<span data-ttu-id="120e6-227">Le trafic entre votre client et Office 365 se déplace via TLS, ce qui signifie que le corps du trafic sera chiffré et ne pourra pas être lu dans un suivi Netmon générique.</span><span class="sxs-lookup"><span data-stu-id="120e6-227">Traffic between your client and Office 365 travels via TLS, which means that the body of the traffic will be encrypted and not readable in a generic Netmon trace.</span></span> <span data-ttu-id="120e6-228">Votre analyse des performances n’a pas besoin de connaître les spécificités des informations dans le paquet.</span><span class="sxs-lookup"><span data-stu-id="120e6-228">Your performance analysis doesn't need to know the specifics of the information in the packet.</span></span> <span data-ttu-id="120e6-229">Toutefois, il s’intéresse beaucoup aux en-têtes de paquets et aux informations qu’ils contiennent.</span><span class="sxs-lookup"><span data-stu-id="120e6-229">It is, however, very interested in packet headers and the information that they contain.</span></span>

### <a name="tips-to-get-a-good-trace"></a><span data-ttu-id="120e6-230">Conseils pour obtenir un bon suivi</span><span class="sxs-lookup"><span data-stu-id="120e6-230">Tips to get a good trace</span></span>

- <span data-ttu-id="120e6-231">Connaissez la valeur de l’adresse IPv4 ou IPv6 de votre ordinateur client.</span><span class="sxs-lookup"><span data-stu-id="120e6-231">Know the value of the IPv4 or IPv6 address of your client computer.</span></span> <span data-ttu-id="120e6-232">Vous pouvez l’obtenir à partir de l’invite de commandes en **tapant IPConfig,** puis en appuyant sur Entrée.</span><span class="sxs-lookup"><span data-stu-id="120e6-232">You can get this from the command prompt by typing **IPConfig** and then pressing ENTER.</span></span> <span data-ttu-id="120e6-233">Le fait de connaître cette adresse vous permettra de déterminer d’un coup d’œil si le trafic dans le suivi implique directement votre ordinateur client.</span><span class="sxs-lookup"><span data-stu-id="120e6-233">Knowing this address will let you tell at a glance whether the traffic in the trace directly involves your client computer.</span></span> <span data-ttu-id="120e6-234">S’il existe un proxy connu, testez-le et obtenez également son adresse IP.</span><span class="sxs-lookup"><span data-stu-id="120e6-234">If there is a known proxy, ping it and get its IP address as well.</span></span>

- <span data-ttu-id="120e6-235">Videz votre cache de résolution DNS et, si possible, fermez tous les navigateurs à l’exception de celui dans lequel vous exécutez vos tests.</span><span class="sxs-lookup"><span data-stu-id="120e6-235">Flush your DNS resolver cache and, if possible, close all browsers except the one in which you are running your tests.</span></span> <span data-ttu-id="120e6-236">Si vous n’êtes pas en mesure de le faire, par exemple, si la prise en charge utilise un outil basé sur un navigateur pour voir le bureau de votre ordinateur client, soyez prêt à filtrer votre suivi.</span><span class="sxs-lookup"><span data-stu-id="120e6-236">If you are not able to do this, for instance, if support is using some browser-based tool to see your client computer's desktop, be prepared to filter your trace.</span></span>

- <span data-ttu-id="120e6-237">Dans une trace occupée, recherchez le service Office 365 que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="120e6-237">In a busy trace, locate the Office 365 service that you're using.</span></span> <span data-ttu-id="120e6-238">Si vous n’avez jamais ou rarement vu votre trafic auparavant, il s’agit d’une étape utile pour séparer le problème de performances des autres bruits du réseau.</span><span class="sxs-lookup"><span data-stu-id="120e6-238">If you've never or seldom seen your traffic before, this is a helpful step in separating the performance issue from other network noise.</span></span> <span data-ttu-id="120e6-239">Il existe plusieurs façons de le faire.</span><span class="sxs-lookup"><span data-stu-id="120e6-239">There are a few ways to do this.</span></span> <span data-ttu-id="120e6-240">Directement avant votre test, vous pouvez utiliser _ping_ ou _PsPing_ par rapport à l’URL du service spécifique `ping outlook.office365.com` `psping -4 microsoft-my.sharepoint.com:443` (ou, par exemple).</span><span class="sxs-lookup"><span data-stu-id="120e6-240">Directly before your test, you can use _ping_ or _PsPing_ against the URL of the specific service (`ping outlook.office365.com` or `psping -4 microsoft-my.sharepoint.com:443`, for example).</span></span> <span data-ttu-id="120e6-241">Vous pouvez également facilement trouver ce ping ou PsPing dans une trace Netmon (par son nom de processus).</span><span class="sxs-lookup"><span data-stu-id="120e6-241">You can also easily find that ping or PsPing in a Netmon trace (by its process name).</span></span> <span data-ttu-id="120e6-242">Cela vous permettra de commencer à regarder.</span><span class="sxs-lookup"><span data-stu-id="120e6-242">That will give you a place to start looking.</span></span>

<span data-ttu-id="120e6-243">Si vous utilisez uniquement le suivi Netmon au moment du problème, cela ne pose aucun problème.</span><span class="sxs-lookup"><span data-stu-id="120e6-243">If you're only using Netmon tracing at the time of the problem, that's okay too.</span></span> <span data-ttu-id="120e6-244">Pour vous orienter, utilisez un filtre comme `ContainsBin(FrameData, ASCII, "office")` ou `ContainsBin(FrameData, ASCII, "outlook")` .</span><span class="sxs-lookup"><span data-stu-id="120e6-244">To orient yourself, use a filter like `ContainsBin(FrameData, ASCII, "office")` or `ContainsBin(FrameData, ASCII, "outlook")`.</span></span> <span data-ttu-id="120e6-245">Vous pouvez enregistrer votre numéro d’image à partir du fichier de suivi.</span><span class="sxs-lookup"><span data-stu-id="120e6-245">You can record your frame number from the trace file.</span></span> <span data-ttu-id="120e6-246">Vous pouvez également faire  défiler le volet Résumé des images jusqu’à la droite et rechercher la colonne ID de conversation.</span><span class="sxs-lookup"><span data-stu-id="120e6-246">You may also want to scroll the _Frame Summary_ pane all the way to the right and look for the Conversation ID column.</span></span> <span data-ttu-id="120e6-247">Un numéro est indiqué ici pour l’ID de cette conversation spécifique que vous pouvez également enregistrer et examiner de manière isolée ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="120e6-247">There is a number indicated there for the ID of this specific conversation that you can also record and look at in isolation later.</span></span> <span data-ttu-id="120e6-248">N’oubliez pas de supprimer ce filtre avant d’appliquer tout autre filtrage.</span><span class="sxs-lookup"><span data-stu-id="120e6-248">Remember to remove this filter before applying any other filtering.</span></span>

> [!TIP]
> <span data-ttu-id="120e6-249">Netmon dispose de nombreux filtres intégrés utiles.</span><span class="sxs-lookup"><span data-stu-id="120e6-249">Netmon has a lot of helpful built-in filters.</span></span> <span data-ttu-id="120e6-250">Essayez le **bouton Charger le** filtre en haut du _volet_ Filtre d’affichage.</span><span class="sxs-lookup"><span data-stu-id="120e6-250">Try the **Load Filter** button at the top of the _Display_ filter pane.</span></span>

![Recherchez votre adresse IP à l’aide de PSPing sur la ligne de commande de l’ordinateur client.](../media/4c43ac67-e28e-4536-842d-7add7aa28847.PNG)

![Suivi Netmon à partir du client affichant la même commande PSPing via le filtre TCP. Flags.Syn == 1.](../media/0ae7ef7d-e003-4d01-a006-dc49bd1fcef2.PNG)

<span data-ttu-id="120e6-253">Familiarisez-vous avec votre trafic et apprenez à trouver les informations dont vous avez besoin.</span><span class="sxs-lookup"><span data-stu-id="120e6-253">Get familiar with your traffic, and learn to locate the information you need.</span></span> <span data-ttu-id="120e6-254">Par exemple, découvrez comment déterminer quel paquet du suivi contient la première référence au service Office 365 que vous utilisez (comme « Outlook »).</span><span class="sxs-lookup"><span data-stu-id="120e6-254">For example, learn to determine which packet in the trace has the first reference to the Office 365 service you're using (like "Outlook").</span></span>

<span data-ttu-id="120e6-255">En prenant Office 365 Outlook Online comme exemple, le trafic commence comme ceci :</span><span class="sxs-lookup"><span data-stu-id="120e6-255">Taking Office 365 Outlook Online as an example, the traffic begins something like this:</span></span>

- <span data-ttu-id="120e6-256">Requête DNS standard et réponse DNS pour les outlook.office365.com avec queryIDs correspondants.</span><span class="sxs-lookup"><span data-stu-id="120e6-256">DNS Standard Query and DNS Response for outlook.office365.com with matching QueryIDs.</span></span> <span data-ttu-id="120e6-257">Il est important de noter le décalage de ce retournement, ainsi que l’endroit dans le monde où le DNS global Office 365 envoie la demande de résolution de noms.</span><span class="sxs-lookup"><span data-stu-id="120e6-257">It's important to note the time offset for this turn-around, as well as where in the world the Office 365 Global DNS sends the request for name resolution.</span></span> <span data-ttu-id="120e6-258">Dans l’idéal, aussi localement que possible, plutôt que dans le monde entier.</span><span class="sxs-lookup"><span data-stu-id="120e6-258">Ideally, as locally as possible, rather than halfway across the world.</span></span>

- <span data-ttu-id="120e6-259">Demande HTTP GET dont le rapport d’état a été déplacé définitivement (301)</span><span class="sxs-lookup"><span data-stu-id="120e6-259">A HTTP GET Request whose status report Moved Permanently (301)</span></span>

- <span data-ttu-id="120e6-260">Trafic RWS incluant les demandes RWS Connect et les réponses de connexion.</span><span class="sxs-lookup"><span data-stu-id="120e6-260">RWS Traffic including RWS Connect requests and Connect replies.</span></span> <span data-ttu-id="120e6-261">(Il s’agit de Winsock distant qui vous fait une connexion.)</span><span class="sxs-lookup"><span data-stu-id="120e6-261">(This is Remote Winsock making a connection for you.)</span></span>

- <span data-ttu-id="120e6-262">Une conversation TCP SYN et TCP SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="120e6-262">A TCP SYN and TCP SYN/ACK conversation.</span></span> <span data-ttu-id="120e6-263">Une grande partie des paramètres de cette conversation ont une incidence sur vos performances.</span><span class="sxs-lookup"><span data-stu-id="120e6-263">A lot of the settings in this conversation impact your performance.</span></span>

- <span data-ttu-id="120e6-264">Puis, une série de trafic TLS:TLS qui est l’endroit où les conversations de certificat TLS et de la poignée de main TLS ont lieu.</span><span class="sxs-lookup"><span data-stu-id="120e6-264">Then a series of TLS:TLS traffic which is where the TLS handshake and TLS certificate conversations take place.</span></span> <span data-ttu-id="120e6-265">(N’oubliez pas que les données sont chiffrées via SSL/TLS.)</span><span class="sxs-lookup"><span data-stu-id="120e6-265">(Remember the data is encrypted via SSL/TLS.)</span></span>

<span data-ttu-id="120e6-266">Toutes les parties du trafic sont importantes et connectées, mais de petites parties du suivi contiennent des informations particulièrement importantes en termes de résolution des problèmes de performances. Nous allons donc nous concentrer sur ces domaines.</span><span class="sxs-lookup"><span data-stu-id="120e6-266">All parts of the traffic are important and connected, but small portions of the trace contain information particularly important in terms of performance troubleshooting, so we'll focus on those areas.</span></span> <span data-ttu-id="120e6-267">En outre, étant donné que nous avons effectué suffisamment de dépannage des performances d’Office 365 chez Microsoft pour compiler une liste des dix principaux problèmes courants, nous allons nous concentrer sur ces problèmes et sur la façon d’utiliser les outils dont nous avons besoin pour les raciner ensuite.</span><span class="sxs-lookup"><span data-stu-id="120e6-267">Also, since we've done enough Office 365 performance troubleshooting at Microsoft to compile a Top Ten list of common problems, we'll focus on those issues and how to use the tools we have to root them out next.</span></span>

<span data-ttu-id="120e6-268">Si vous ne les avez pas tous installés, la matrice ci-dessous utilise plusieurs outils.</span><span class="sxs-lookup"><span data-stu-id="120e6-268">If you haven't installed them all ready, the matrix below makes use of several tools.</span></span> <span data-ttu-id="120e6-269">Dans la mesure du possible.</span><span class="sxs-lookup"><span data-stu-id="120e6-269">Where possible.</span></span> <span data-ttu-id="120e6-270">Des liens sont fournis vers les points d’installation.</span><span class="sxs-lookup"><span data-stu-id="120e6-270">Links are provided to the installation points.</span></span> <span data-ttu-id="120e6-271">La liste inclut les outils de suivi réseau courants tels que [Netmon](https://www.microsoft.com/download/details.aspx?id=4865) et [Wireshark,](https://www.wireshark.org/)mais utilise tout outil de suivi que vous êtes à l’aise avec et dans lequel vous êtes habitué à filtrer le trafic réseau.</span><span class="sxs-lookup"><span data-stu-id="120e6-271">The list includes common network tracing tools like [Netmon](https://www.microsoft.com/download/details.aspx?id=4865) and [Wireshark](https://www.wireshark.org/), but use any tracing tool you are comfortable with, and in which you're accustomed to filtering network traffic.</span></span> <span data-ttu-id="120e6-272">Lorsque vous testez, n’oubliez pas :</span><span class="sxs-lookup"><span data-stu-id="120e6-272">When you're testing, remember:</span></span>

- <span data-ttu-id="120e6-273">*Fermez vos navigateurs et testez avec*  un seul navigateur en cours d’exécution, ce qui réduit le trafic global que vous capturez.</span><span class="sxs-lookup"><span data-stu-id="120e6-273">*Close your browsers, and test with only one browser running*  - This will reduce the overall traffic you capture.</span></span> <span data-ttu-id="120e6-274">Il permet une trace moins occupée.</span><span class="sxs-lookup"><span data-stu-id="120e6-274">It makes for a less busy trace.</span></span>
- <span data-ttu-id="120e6-275">*Videz votre cache*  de résolution DNS sur l’ordinateur client. Cela vous donne une nouvelle tablette lorsque vous commencez à prendre votre capture, pour un suivi plus net.</span><span class="sxs-lookup"><span data-stu-id="120e6-275">*Flush your DNS resolver cache on the client computer*  - This will give you a clean slate when you start to take your capture, for a cleaner trace.</span></span>

## <a name="common-issues"></a><span data-ttu-id="120e6-276">Problèmes courants</span><span class="sxs-lookup"><span data-stu-id="120e6-276">Common issues</span></span>

<span data-ttu-id="120e6-277">Certains problèmes courants que vous pouvez être confrontés et comment les trouver dans votre suivi réseau.</span><span class="sxs-lookup"><span data-stu-id="120e6-277">Some common issues you may face and how to find them in your Network trace.</span></span>

### <a name="tcp-windows-scaling"></a><span data-ttu-id="120e6-278">Mise à l’échelle windows TCP</span><span class="sxs-lookup"><span data-stu-id="120e6-278">TCP Windows Scaling</span></span>

<span data-ttu-id="120e6-279">Se trouve dans la syn - SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="120e6-279">Found in the SYN - SYN/ACK.</span></span> <span data-ttu-id="120e6-280">Le matériel hérité ou ancien peut ne pas tirer parti de la mise à l’échelle des fenêtres TCP.</span><span class="sxs-lookup"><span data-stu-id="120e6-280">Legacy or aging hardware may not take advantage of TCP windows scaling.</span></span>  <span data-ttu-id="120e6-281">Sans les paramètres de mise à l’échelle des fenêtres TCP appropriés, la mémoire tampon 16 bits par défaut dans les en-têtes TCP se remplit en millisecondes.</span><span class="sxs-lookup"><span data-stu-id="120e6-281">Without proper TCP windows scaling settings, the default 16-bit buffer in TCP headers fills in milliseconds.</span></span>  <span data-ttu-id="120e6-282">Le trafic ne peut pas continuer à envoyer tant que le client n’a pas reçu d’accusé de réception des données d’origine, ce qui provoque des retards.</span><span class="sxs-lookup"><span data-stu-id="120e6-282">Traffic cannot continue to send until the client receives an acknowledgment that the original data has been received, causing delays.</span></span>

#### <a name="tools"></a><span data-ttu-id="120e6-283">Outils</span><span class="sxs-lookup"><span data-stu-id="120e6-283">Tools</span></span>

- <span data-ttu-id="120e6-284">Netmon</span><span class="sxs-lookup"><span data-stu-id="120e6-284">Netmon</span></span>
- <span data-ttu-id="120e6-285">Wireshark</span><span class="sxs-lookup"><span data-stu-id="120e6-285">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="120e6-286">Ce qu’il faut rechercher</span><span class="sxs-lookup"><span data-stu-id="120e6-286">What to look for</span></span>

<span data-ttu-id="120e6-287">Recherchez le trafic SYN - SYN/ACK dans votre suivi réseau.</span><span class="sxs-lookup"><span data-stu-id="120e6-287">Look for the SYN - SYN/ACK traffic in your network trace.</span></span>  <span data-ttu-id="120e6-288">Dans Netmon, utilisez un filtre comme  `tcp.flags.syn == 1` .</span><span class="sxs-lookup"><span data-stu-id="120e6-288">In Netmon, use a filter like  `tcp.flags.syn == 1`.</span></span> <span data-ttu-id="120e6-289">Ce filtre est le même dans Wireshark.</span><span class="sxs-lookup"><span data-stu-id="120e6-289">This filter is the same in Wireshark.</span></span>

![Filtre dans Netmon ou Wireshark pour les paquets Syn pour les deux outils : TCP. Flags.Syn == 1.](../media/4b9a12a1-c915-43c8-ac2f-a679d0435a29.PNG)

<span data-ttu-id="120e6-291">Notez que pour chaque syn, il existe un numéro de port source (SrcPort) qui correspond au port de destination (DstPort) de l’accusé de réception associé (SYN/ACK).</span><span class="sxs-lookup"><span data-stu-id="120e6-291">Notice that for every SYN there is a source port (SrcPort) number that is matched in the destination port (DstPort) of the related Acknowledgment (SYN/ACK).</span></span>

<span data-ttu-id="120e6-292">Pour voir la valeur de mise à l’échelle Windows utilisée par votre connexion réseau, développez d’abord le syn, puis le SYN/ACK associé.</span><span class="sxs-lookup"><span data-stu-id="120e6-292">To see the Windows Scaling value that is used by your network connection, expand first the SYN, and then the related SYN/ACK.</span></span>

![Graphique shows how to match SrcPort to DstPort in a trace, to get the time delta.](../media/6a4ca573-0253-4fbd-93e8-92821ee1c351.png)

### <a name="tcp-idle-time-settings"></a><span data-ttu-id="120e6-294">Paramètres de temps d’inactivité TCP</span><span class="sxs-lookup"><span data-stu-id="120e6-294">TCP Idle Time Settings</span></span>

<span data-ttu-id="120e6-295">Historiquement, la plupart des réseaux de périmètre sont configurés pour les connexions temporaires, ce qui signifie que les connexions inactives sont généralement interrompues.</span><span class="sxs-lookup"><span data-stu-id="120e6-295">Historically, most perimeter networks are configured for transient connections, meaning idle connections are generally terminated.</span></span> <span data-ttu-id="120e6-296">Les sessions TCP inactives peuvent être interrompues par des proxies et des pare-feu de plus de 100 à 300 secondes.</span><span class="sxs-lookup"><span data-stu-id="120e6-296">Idle TCP sessions can be terminated by proxies and firewalls at greater than 100 to 300 seconds.</span></span> <span data-ttu-id="120e6-297">Cela pose problème pour Outlook Online, car il crée et utilise des connexions à long terme, qu’elles soient inactives ou non.</span><span class="sxs-lookup"><span data-stu-id="120e6-297">This is problematic for Outlook Online because it creates and uses long-term connections, whether they are idle or not.</span></span>

<span data-ttu-id="120e6-298">Lorsque les connexions sont interrompues par des périphériques proxy ou pare-feu, le client n’est pas informé et une tentative d’utilisation d’Outlook Online signifie qu’un ordinateur client essaiera, à plusieurs reprises, d’établir la connexion avant d’en effectuer une nouvelle.</span><span class="sxs-lookup"><span data-stu-id="120e6-298">When connections are terminated by proxy or firewall devices, the client is not informed, and an attempt to use Outlook Online will mean a client computer will try, repeatedly, to revive the connection before making a new one.</span></span> <span data-ttu-id="120e6-299">Vous pouvez voir des hangs dans le produit, des invites ou des performances lentes lors du chargement de la page.</span><span class="sxs-lookup"><span data-stu-id="120e6-299">You may see hangs in the product, prompts, or slow performance on page load.</span></span>

#### <a name="tools"></a><span data-ttu-id="120e6-300">Outils</span><span class="sxs-lookup"><span data-stu-id="120e6-300">Tools</span></span>

- <span data-ttu-id="120e6-301">Netmon</span><span class="sxs-lookup"><span data-stu-id="120e6-301">Netmon</span></span>
- <span data-ttu-id="120e6-302">Wireshark</span><span class="sxs-lookup"><span data-stu-id="120e6-302">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="120e6-303">Ce qu’il faut rechercher</span><span class="sxs-lookup"><span data-stu-id="120e6-303">What to look for</span></span>

<span data-ttu-id="120e6-304">Dans Netmon, recherchez un aller-retour dans le champ Décalage de temps.</span><span class="sxs-lookup"><span data-stu-id="120e6-304">In Netmon, look at the Time Offset field for a round-trip.</span></span> <span data-ttu-id="120e6-305">Un aller-retour est le délai entre l’envoi par le client d’une demande au serveur et la réception d’une réponse.</span><span class="sxs-lookup"><span data-stu-id="120e6-305">A round-trip is the time between client sending a request to the server and receiving a response back.</span></span> <span data-ttu-id="120e6-306">Vérifiez entre le client et le point de sortie (par exemple.</span><span class="sxs-lookup"><span data-stu-id="120e6-306">Check between the Client and the egress point (ex.</span></span> <span data-ttu-id="120e6-307">Client -- \> Proxy) ou client vers Office 365 (client -- \> Office 365).</span><span class="sxs-lookup"><span data-stu-id="120e6-307">Client --\> Proxy), or the Client to Office 365 (Client --\> Office 365).</span></span> <span data-ttu-id="120e6-308">Vous pouvez le voir dans de nombreux types de paquets.</span><span class="sxs-lookup"><span data-stu-id="120e6-308">You can see this in many types of packets.</span></span>

<span data-ttu-id="120e6-309">Par exemple, le filtre dans Netmon peut ressembler  `.Protocol.IPv4.Address == 10.102.14.112 AND .Protocol.IPv4.Address == 10.201.114.12` à , ou, dans Wireshark,  `ip.addr == 10.102.14.112 &amp;&amp; ip.addr == 10.201.114.12` .</span><span class="sxs-lookup"><span data-stu-id="120e6-309">As an example, the filter in Netmon may look like  `.Protocol.IPv4.Address == 10.102.14.112 AND .Protocol.IPv4.Address == 10.201.114.12`, or, in Wireshark,  `ip.addr == 10.102.14.112 &amp;&amp; ip.addr == 10.201.114.12`.</span></span>

> [!TIP]
> <span data-ttu-id="120e6-310">Vous ne savez pas si l’adresse IP de votre suivi appartient à votre serveur DNS ?</span><span class="sxs-lookup"><span data-stu-id="120e6-310">Don't know if the IP address in your trace belongs to your DNS server?</span></span> <span data-ttu-id="120e6-311">Essayez de le regarder sur la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="120e6-311">Try looking it up at the command line.</span></span> <span data-ttu-id="120e6-312">Cliquez **sur Démarrer** \> **l’exécuter** et \> **tapez cmd,** ou appuyez **sur la touche Windows et** \> **tapez cmd**.</span><span class="sxs-lookup"><span data-stu-id="120e6-312">Click **Start** \> **Run** \> and type **cmd**, or press **Windows Key** \> and type **cmd**.</span></span> <span data-ttu-id="120e6-313">À l’invite, tapez  `nslookup <the IP address from the network trace>` .</span><span class="sxs-lookup"><span data-stu-id="120e6-313">At the prompt, type  `nslookup <the IP address from the network trace>`.</span></span> <span data-ttu-id="120e6-314">Pour tester, utilisez nslookup par rapport à l’adresse IP de votre propre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="120e6-314">To test, use nslookup against your own computer's IP address.</span></span> <span data-ttu-id="120e6-315">> pour consulter la liste des plages d’adresses IP de Microsoft, voir URL [et plages d’adresses IP Office 365.](https://technet.microsoft.com/library/hh373144.aspx)</span><span class="sxs-lookup"><span data-stu-id="120e6-315">> To see a list of Microsoft's IP ranges, see [Office 365 URLs and IP address ranges](https://technet.microsoft.com/library/hh373144.aspx).</span></span>

<span data-ttu-id="120e6-316">En cas de problème, attendez-vous à ce que des décalages de temps longs apparaissent, dans ce cas (Outlook Online), en particulier dans les paquets TLS:TLS qui affichent le passage de données d’application (par exemple, dans Netmon, vous pouvez trouver des paquets de données d’application via  `.Protocol.TLS AND Description == "TLS:TLS Rec Layer-1 SSL Application Data"` ).</span><span class="sxs-lookup"><span data-stu-id="120e6-316">If there is a problem, expect long Time Offsets to appear, in this case (Outlook Online), particularly in TLS:TLS packets that show the passage of Application Data (for example, in Netmon you can find application data packets via  `.Protocol.TLS AND Description == "TLS:TLS Rec Layer-1 SSL Application Data"`).</span></span> <span data-ttu-id="120e6-317">Vous devriez voir une progression fluide dans le temps tout au long de la session.</span><span class="sxs-lookup"><span data-stu-id="120e6-317">You should see a smooth progression in the time across the session.</span></span> <span data-ttu-id="120e6-318">Si vous constatez de longs retards lors de l’actualisation d’Outlook Online, cela peut être dû à un degré élevé de réinitialisations envoyées.</span><span class="sxs-lookup"><span data-stu-id="120e6-318">If you see long delays when refreshing your Outlook Online, this could be caused by a high degree of resets being sent.</span></span>

### <a name="latencyround-trip-time"></a><span data-ttu-id="120e6-319">Latence/Durée de l’aller-retour</span><span class="sxs-lookup"><span data-stu-id="120e6-319">Latency/Round Trip Time</span></span>

<span data-ttu-id="120e6-320">La latence est une mesure qui peut changer beaucoup en fonction de nombreuses variables, telles que la mise à niveau des appareils plus récents, l’ajout d’un grand nombre d’utilisateurs à un réseau et le pourcentage de bande passante globale consommée par d’autres tâches sur une connexion réseau.</span><span class="sxs-lookup"><span data-stu-id="120e6-320">Latency is a measure that can change a lot depending on many variables, such upgrading aging devices, adding a large number of users to a network, and the percentage of overall bandwidth consumed by other tasks on a network connection.</span></span>

<span data-ttu-id="120e6-321">Des calculatrices de bande passante pour Office 365 sont disponibles à partir de cette page planification réseau et optimisation des performances pour [Office 365.](network-planning-and-performance.md)</span><span class="sxs-lookup"><span data-stu-id="120e6-321">There are bandwidth calculators for Office 365 available from this [Network planning and performance tuning for Office 365](network-planning-and-performance.md) page.</span></span>

<span data-ttu-id="120e6-322">Vous avez besoin de mesurer la vitesse de votre connexion ou de la bande passante de votre connexion ISP ?</span><span class="sxs-lookup"><span data-stu-id="120e6-322">Need to measure the speed of your connection, or your ISP connection's bandwidth?</span></span> <span data-ttu-id="120e6-323">Essayez ce site (ou des sites comme celui-ci) : [Speedtest Official Site](https://www.speedtest.net/)ou interrogez votre moteur de recherche favori pour le test de vitesse **d’expression.**</span><span class="sxs-lookup"><span data-stu-id="120e6-323">Try this site (or sites like it): [Speedtest Official Site](https://www.speedtest.net/), or query your favorite search engine for the phrase **speed test**.</span></span>

#### <a name="tools"></a><span data-ttu-id="120e6-324">Outils</span><span class="sxs-lookup"><span data-stu-id="120e6-324">Tools</span></span>

- <span data-ttu-id="120e6-325">Ping</span><span class="sxs-lookup"><span data-stu-id="120e6-325">Ping</span></span>
- <span data-ttu-id="120e6-326">PsPing</span><span class="sxs-lookup"><span data-stu-id="120e6-326">PsPing</span></span>
- <span data-ttu-id="120e6-327">Netmon</span><span class="sxs-lookup"><span data-stu-id="120e6-327">Netmon</span></span>
- <span data-ttu-id="120e6-328">Wireshark</span><span class="sxs-lookup"><span data-stu-id="120e6-328">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="120e6-329">Ce qu’il faut rechercher</span><span class="sxs-lookup"><span data-stu-id="120e6-329">What to look for</span></span>

<span data-ttu-id="120e6-330">Pour suivre la latence dans un suivi, vous bénéficierez de l’enregistrement de l’adresse IP de l’ordinateur client et de l’adresse IP du serveur DNS dans Office 365.</span><span class="sxs-lookup"><span data-stu-id="120e6-330">To track latency in a trace, you will benefit from having recorded the client computer IP address and the IP address of the DNS server in Office 365.</span></span> <span data-ttu-id="120e6-331">Cela a pour but de faciliter le filtrage du suivi.</span><span class="sxs-lookup"><span data-stu-id="120e6-331">This is for the purpose of easier trace filtering.</span></span> <span data-ttu-id="120e6-332">Si vous vous connectez via un proxy, vous aurez besoin de l’adresse IP de votre ordinateur client, de l’adresse IP proxy/sortie et de l’adresse IP DNS Office 365 pour faciliter le travail.</span><span class="sxs-lookup"><span data-stu-id="120e6-332">If you connect through a proxy, you will need your client computer IP address, the proxy/egress IP address, and the Office 365 DNS IP address, to make the work easier.</span></span>

<span data-ttu-id="120e6-333">Une demande ping envoyée à outlook.office365.com vous indique le nom du centre de données qui reçoit la demande, même si  *ping*  peut ne pas être en mesure de se connecter pour envoyer les paquets ICMP consécutifs de marque.</span><span class="sxs-lookup"><span data-stu-id="120e6-333">A ping request sent to outlook.office365.com will tell you the name of the datacenter receiving the request, even if ping  *may*  not be able to connect to send the trademark consecutive ICMP packets.</span></span> <span data-ttu-id="120e6-334">Si vous utilisez PsPing (un outil gratuit pour le téléchargement) et que vous précisez le port (443) et éventuellement pour utiliser IPv4 (-4), vous obtenez un aller-retour moyen pour les paquets envoyés.</span><span class="sxs-lookup"><span data-stu-id="120e6-334">If you use PsPing (a free tool for download), and specific the port (443) and perhaps to use IPv4 (-4) you will get an average round-trip-time for packets sent.</span></span> <span data-ttu-id="120e6-335">Cela fonctionne pour d’autres URL dans les services Office 365, comme `psping -4 yourSite.sharepoint.com:443` .</span><span class="sxs-lookup"><span data-stu-id="120e6-335">This will work this for other URLs in the Office 365 services, like `psping -4 yourSite.sharepoint.com:443`.</span></span> <span data-ttu-id="120e6-336">En fait, vous pouvez spécifier un nombre de pings pour obtenir un échantillon plus important pour votre moyenne, essayez quelque chose comme `psping -4 -n 20 yourSite-my.sharepoint.com:443` .</span><span class="sxs-lookup"><span data-stu-id="120e6-336">In fact, you can specify a number of pings to get a larger sample for your average, try something like `psping -4 -n 20 yourSite-my.sharepoint.com:443`.</span></span>

> [!NOTE]
> <span data-ttu-id="120e6-337">PsPing n’envoie pas de paquets ICMP.</span><span class="sxs-lookup"><span data-stu-id="120e6-337">PsPing doesn't send ICMP packets.</span></span> <span data-ttu-id="120e6-338">Il teste avec des paquets TCP sur un port spécifique, afin que vous pouvez utiliser n’importe quel port que vous connaissez comme ouvert.</span><span class="sxs-lookup"><span data-stu-id="120e6-338">It pings with TCP packets over a specific port, so you can use any one you know to be open.</span></span> <span data-ttu-id="120e6-339">Dans Office 365, qui utilise SSL/TLS, essayez d’attacher le port :443 à votre PsPing.</span><span class="sxs-lookup"><span data-stu-id="120e6-339">In Office 365, which uses SSL/TLS, try attaching port :443 to your PsPing.</span></span>

![Capture d’écran shows a ping resolving outlook.office365.com, and a PSPing with the 443 doing the same, but also reporting a 6.5ms average RTT.](../media/c64339f2-2c96-45b8-b168-c2a060430266.PNG)

<span data-ttu-id="120e6-341">Si vous avez chargé la page Office 365 lente lors d’un suivi réseau, vous devez filtrer une trace Netmon ou Wireshark pour `DNS` .</span><span class="sxs-lookup"><span data-stu-id="120e6-341">If you loaded the slow performing Office 365 page while doing a network trace, you should filter a Netmon or Wireshark trace for `DNS`.</span></span> <span data-ttu-id="120e6-342">Il s’agit de l’une desps que nous recherchons.</span><span class="sxs-lookup"><span data-stu-id="120e6-342">This is one of the IPs we're looking for.</span></span>

<span data-ttu-id="120e6-343">Voici les étapes à suivre pour filtrer votre Netmon afin d’obtenir l’adresse IP (et examiner la latence DNS).</span><span class="sxs-lookup"><span data-stu-id="120e6-343">Here are the steps to take to filter your Netmon to get the IP address (and take a look at DNS Latency).</span></span> <span data-ttu-id="120e6-344">Cet exemple utilise outlook.office365.com, mais peut également utiliser l’URL d’un client SharePoint Online (hithere.sharepoint.com par exemple).</span><span class="sxs-lookup"><span data-stu-id="120e6-344">This example uses outlook.office365.com, but may also use the URL of a SharePoint Online tenant (hithere.sharepoint.com for example).</span></span>

1. <span data-ttu-id="120e6-345">Ping sur l’URL et, dans les résultats, enregistrez le nom et l’adresse IP du serveur DNS à qui la demande `ping outlook.office365.com` ping a été envoyée.</span><span class="sxs-lookup"><span data-stu-id="120e6-345">Ping the URL `ping outlook.office365.com` and, in the results, record the name and IP address of the DNS server the ping request was sent to.</span></span>
2. <span data-ttu-id="120e6-346">Suivi réseau ouvrant la page, ou faisant l’action qui vous donne le problème de performances, ou, si vous voyez une latence élevée sur le ping, lui-même, le suivi réseau.</span><span class="sxs-lookup"><span data-stu-id="120e6-346">Network trace opening the page, or doing the action that gives you the performance problem, or, if you see a high latency on the ping, itself, network trace it.</span></span>
3. <span data-ttu-id="120e6-347">Ouvrez le suivi dans Netmon et le filtre pour DNS (ce filtre fonctionne également dans Wireshark, mais il est sensible à la `-- dns` cas).</span><span class="sxs-lookup"><span data-stu-id="120e6-347">Open the trace in Netmon and filter for DNS (this filter also works in Wireshark, but is sensitive to case `-- dns`).</span></span> <span data-ttu-id="120e6-348">Étant donné que vous connaissez le nom du serveur DNS à partir de votre ping, vous pouvez également filtrer plus rapidement dans Netmon comme ceci : , qui ressemble à ceci dans wireshark dns et le cadre contient « `DNS AND ContainsBin(FrameData, ASCII, "namnorthwest")` namnorthwest ».</span><span class="sxs-lookup"><span data-stu-id="120e6-348">Since you know the name of the DNS server from your ping you may also filter more speedily in Netmon like this: `DNS AND ContainsBin(FrameData, ASCII, "namnorthwest")`, which looks like this in Wireshark dns and frame contains "namnorthwest".</span></span><br/><span data-ttu-id="120e6-349">Ouvrez le paquet de réponse et, dans la fenêtre **Détails** du cadre Netmon, cliquez sur **DNS** pour développer pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="120e6-349">Open the response packet and, in the Netmon **Frame Details** window, click **DNS** to expand for more information.</span></span> <span data-ttu-id="120e6-350">Dans les informations DNS, vous trouverez l’adresse IP du serveur DNS vers qui la demande a été passée dans Office 365.</span><span class="sxs-lookup"><span data-stu-id="120e6-350">In the DNS information you'll find the IP address of the DNS server the request went to in Office 365.</span></span> <span data-ttu-id="120e6-351">Vous aurez besoin de cette adresse IP pour l’étape suivante (l’outil PsPing).</span><span class="sxs-lookup"><span data-stu-id="120e6-351">You'll need this IP address for the next step (the PsPing tool).</span></span> <span data-ttu-id="120e6-352">Supprimez le filtre, cliquez avec le bouton droit sur la réponse DNS dans Netmon (**Frame Summary** \> **Find Conversations** \> **DNS**) pour voir la requête et la réponse DNS côte à côte.</span><span class="sxs-lookup"><span data-stu-id="120e6-352">Remove the filter, right-click on the DNS Response in Netmon (**Frame Summary** \> **Find Conversations** \> **DNS**) to see the DNS Query and Response side-by-side.</span></span>
4. <span data-ttu-id="120e6-353">Dans Netmon, notez également la colonne Décalage de temps entre la demande DNS et la réponse.</span><span class="sxs-lookup"><span data-stu-id="120e6-353">In Netmon, also note the Time Offset  column between the DNS Request and Response.</span></span> <span data-ttu-id="120e6-354">Dans l’étape suivante, l’outil [PsPing](https://technet.microsoft.com/sysinternals/jj729731.aspx) facile à installer et à utiliser est très pratique, à la fois parce que ICMP est souvent bloqué sur les pare-feu et parce que PsPing suit la latence en millisecondes.</span><span class="sxs-lookup"><span data-stu-id="120e6-354">In the next step, the easy-to-install and use [PsPing](https://technet.microsoft.com/sysinternals/jj729731.aspx) tool comes in very handy, both because ICMP is often blocked on Firewalls, and because PsPing elegantly tracks latency in milliseconds.</span></span> <span data-ttu-id="120e6-355">PsPing termine une connexion TCP à une adresse et un port (dans notre cas, ouvrez le port 443).</span><span class="sxs-lookup"><span data-stu-id="120e6-355">PsPing completes a TCP connection to an address and port (in our case open port 443).</span></span>
5. <span data-ttu-id="120e6-356">Installez PsPing.</span><span class="sxs-lookup"><span data-stu-id="120e6-356">Install PsPing.</span></span>
6. <span data-ttu-id="120e6-357">Ouvrez une invite de commandes (cmd de type Démarrer l’exécuter ou cmd de type clé Windows) et modifiez le répertoire dans lequel vous avez installé PsPing pour exécuter la commande \> \> \> PsPing.</span><span class="sxs-lookup"><span data-stu-id="120e6-357">Open a command prompt (Start \> Run \> type cmd, or Windows Key \> type cmd) and change directory to the directory where you installed PsPing to run the PsPing command.</span></span> <span data-ttu-id="120e6-358">Dans mes exemples, vous pouvez voir que j’ai créé un dossier « Perf » à la racine de C. Vous pouvez faire de même pour un accès rapide.</span><span class="sxs-lookup"><span data-stu-id="120e6-358">In my examples you can see I made a 'Perf' folder on the root of C. You can do the same for quick access.</span></span>
7. <span data-ttu-id="120e6-359">Tapez la commande pour effectuer votre PsPing par rapport à l’adresse IP du serveur DNS Office 365 à partir de votre trace Netmon antérieure, y compris le numéro de port, par `psping -n 20 132.245.24.82:445` exemple.</span><span class="sxs-lookup"><span data-stu-id="120e6-359">Type the command so that you're making your PsPing against the IP address of the Office 365 DNS server from your earlier Netmon trace, including the port number, like `psping -n 20 132.245.24.82:445`.</span></span> <span data-ttu-id="120e6-360">Vous aurez ainsi un échantillonnage de 20 pings et la latence moyenne à l’arrêt du PsPing.</span><span class="sxs-lookup"><span data-stu-id="120e6-360">This will give you a sampling of 20 pings and average the latency when PsPing stops.</span></span>

<span data-ttu-id="120e6-361">Si vous allez vers Office 365 via un serveur proxy, les étapes sont légèrement différentes.</span><span class="sxs-lookup"><span data-stu-id="120e6-361">If you're going to Office 365 through a proxy server, the steps are a little different.</span></span> <span data-ttu-id="120e6-362">Vous devez d’abord psPing vers votre serveur proxy pour obtenir une valeur moyenne de latence en millisecondes pour proxy/sortie et retour, puis exécuter PsPing sur le proxy ou sur un ordinateur avec une connexion Internet directe pour obtenir la valeur manquante (celle vers Office 365 et retour).</span><span class="sxs-lookup"><span data-stu-id="120e6-362">You would first PsPing to your proxy server to get an average latency value in milliseconds to proxy/egress and back, and then either run PsPing on the proxy, or on a computer with a direct Internet connection to get the missing value (the one to Office 365 and back).</span></span>

<span data-ttu-id="120e6-363">Si vous choisissez d’exécuter PsPing à partir du proxy, vous aurez deux millisecondes : ordinateur client vers serveur proxy ou point de sortie, et serveur proxy vers Office 365.</span><span class="sxs-lookup"><span data-stu-id="120e6-363">If you choose to run PsPing from the proxy, you'll have two millisecond values: Client computer to proxy server or egress point, and proxy server to Office 365.</span></span> <span data-ttu-id="120e6-364">Et vous avez terminé !</span><span class="sxs-lookup"><span data-stu-id="120e6-364">And you're done!</span></span> <span data-ttu-id="120e6-365">Tout de même, l’enregistrement des valeurs.</span><span class="sxs-lookup"><span data-stu-id="120e6-365">Well, recording values, anyway.</span></span>

<span data-ttu-id="120e6-366">Si vous exécutez PsPing sur un autre ordinateur client qui dispose d’une connexion directe à Internet, c’est-à-dire, sans proxy, vous aurez deux valeurs de millisecondes : l’ordinateur client vers le serveur proxy ou le point de sortie, et l’ordinateur client vers Office 365.</span><span class="sxs-lookup"><span data-stu-id="120e6-366">If you run PsPing on another client computer that has a direct connection to the Internet, that is, without a proxy, you will have two millisecond values: Client computer to proxy server or egress point, and client computer to Office 365.</span></span> <span data-ttu-id="120e6-367">Dans ce cas, soustrayez la valeur de l’ordinateur client au serveur proxy ou au point de sortie de la valeur de l’ordinateur client vers Office 365, et vous aurez les numéros RTT de votre ordinateur client vers le serveur proxy ou le point de sortie, ainsi que du serveur proxy ou du point de sortie vers Office 365.</span><span class="sxs-lookup"><span data-stu-id="120e6-367">In this case, subtract the value of client computer to proxy server or egress point from the value of client computer to Office 365, and you will have the RTT numbers from your client computer to the proxy server or egress point, and from proxy server or egress point to Office 365.</span></span>

<span data-ttu-id="120e6-368">Toutefois, si vous pouvez trouver un ordinateur client directement connecté à l’emplacement touché, ou si vous ignorez le proxy, vous pouvez choisir de voir si le problème se reproduit à cet emplacement et de tester son utilisation par la suite.</span><span class="sxs-lookup"><span data-stu-id="120e6-368">However, if you can find a client computer in the impacted location that is directly connected, or bypasses the proxy, you may choose to see if the issue reproduces there to begin with, and test using it thereafter.</span></span>

<span data-ttu-id="120e6-369">La latence, comme dans un suivi Netmon, ces millisecondes supplémentaires peuvent s’ajouter, si elles sont suffisantes dans une session donnée.</span><span class="sxs-lookup"><span data-stu-id="120e6-369">Latency, as seen in a Netmon trace, those extra milliseconds can add up, if there are enough of them in any given session.</span></span>

![Latence générale dans Netmon, avec la colonne Délai par défaut Netmon ajoutée au Résumé de la trame.](../media/7ad17380-8527-4bc2-9b9b-6310cf19ba6b.PNG)

> [!NOTE]
> <span data-ttu-id="120e6-371">Votre adresse IP peut être différente des adresses IP indiquées ici, par exemple, votre ping peut renvoyer un nombre plus proche de 157.56.0.0/16 ou d’une plage similaire.</span><span class="sxs-lookup"><span data-stu-id="120e6-371">Your IP address may be different than the IPs shown here, for example, your ping may return something more like 157.56.0.0/16 or a similar range.</span></span> <span data-ttu-id="120e6-372">Pour obtenir la liste des plages utilisées par Office 365, consultez les URL et les [plages d’adresses IP Office 365.](https://technet.microsoft.com/library/hh373144.aspx)</span><span class="sxs-lookup"><span data-stu-id="120e6-372">For a list of ranges used by Office 365, check out [Office 365 URLs and IP address ranges](https://technet.microsoft.com/library/hh373144.aspx).</span></span>

<span data-ttu-id="120e6-373">N’oubliez pas de développer tous les nodes (il existe un bouton en haut pour cela) si vous souhaitez rechercher, par exemple, 132.245.</span><span class="sxs-lookup"><span data-stu-id="120e6-373">Remember to expand all the nodes (there's a button at the top for this) if you want to search for, for example, 132.245.</span></span>

### <a name="proxy-authentication"></a><span data-ttu-id="120e6-374">Authentification proxy</span><span class="sxs-lookup"><span data-stu-id="120e6-374">Proxy Authentication</span></span>

<span data-ttu-id="120e6-375">Cela ne s’applique à vous que si vous êtes en train de passer par un serveur proxy.</span><span class="sxs-lookup"><span data-stu-id="120e6-375">This only applies to you if you're going through a proxy server.</span></span> <span data-ttu-id="120e6-376">Si ce n’est pas le cas, vous pouvez ignorer ces étapes.</span><span class="sxs-lookup"><span data-stu-id="120e6-376">If not, you can skip these steps.</span></span> <span data-ttu-id="120e6-377">Lorsque vous travaillez correctement, l’authentification proxy doit avoir lieu en millisecondes, de manière cohérente.</span><span class="sxs-lookup"><span data-stu-id="120e6-377">When working properly, proxy authentication should take place in milliseconds, consistently.</span></span> <span data-ttu-id="120e6-378">Vous ne devriez pas voir de mauvaises performances intermittentes pendant les périodes d’utilisation maximales (par exemple).</span><span class="sxs-lookup"><span data-stu-id="120e6-378">You shouldn't see intermittent bad performance during peak usage periods (for example).</span></span>

<span data-ttu-id="120e6-379">Si l’authentification proxy est en cours, chaque fois que vous faites une nouvelle connexion TCP à Office 365 pour obtenir des informations, vous devez passer par un processus d’authentification en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="120e6-379">If Proxy authentication is on, each time you make a new TCP connection to Office 365 to get information, you need to pass through an authentication process behind the scenes.</span></span> <span data-ttu-id="120e6-380">Ainsi, par exemple, lors du passage du calendrier à la messagerie dans Outlook Online, vous vous authentifierez.</span><span class="sxs-lookup"><span data-stu-id="120e6-380">So, for example, when switching from Calendar to Mail in Outlook Online, you will authenticate.</span></span> <span data-ttu-id="120e6-381">Et dans SharePoint Online, si une page affiche des données ou des médias provenant de plusieurs sites ou emplacements, vous vous authentifierez pour chaque connexion TCP nécessaire afin d’afficher les données.</span><span class="sxs-lookup"><span data-stu-id="120e6-381">And in SharePoint Online, if a page displays media or data from multiple sites or locations, you will authenticate for each different TCP connection that is needed in order to render the data.</span></span>

<span data-ttu-id="120e6-382">Dans Outlook Online, vous pouvez connaître des temps de chargement lents lorsque vous basculez entre le calendrier et votre boîte aux lettres, ou des chargements de page lents dans SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="120e6-382">In Outlook Online, you may experience slow load times whenever you switch between Calendar and your mailbox, or slow page loads in SharePoint Online.</span></span> <span data-ttu-id="120e6-383">Toutefois, d’autres symptômes ne sont pas répertoriés ici.</span><span class="sxs-lookup"><span data-stu-id="120e6-383">However, there are other symptoms not listed here.</span></span>

<span data-ttu-id="120e6-384">L’authentification proxy est un paramètre sur votre serveur proxy de sortie.</span><span class="sxs-lookup"><span data-stu-id="120e6-384">Proxy authentication is a setting on your egress proxy server.</span></span> <span data-ttu-id="120e6-385">Si elle provoque un problème de performances avec Office 365, vous devez consulter votre équipe réseau.</span><span class="sxs-lookup"><span data-stu-id="120e6-385">If it is causing a performance issue with Office 365, you must consult your networking team.</span></span>

#### <a name="tools"></a><span data-ttu-id="120e6-386">Outils</span><span class="sxs-lookup"><span data-stu-id="120e6-386">Tools</span></span>

- <span data-ttu-id="120e6-387">Netmon</span><span class="sxs-lookup"><span data-stu-id="120e6-387">Netmon</span></span>
- <span data-ttu-id="120e6-388">Wireshark</span><span class="sxs-lookup"><span data-stu-id="120e6-388">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="120e6-389">Ce qu’il faut rechercher</span><span class="sxs-lookup"><span data-stu-id="120e6-389">What to look for</span></span>

<span data-ttu-id="120e6-390">L’authentification proxy a lieu chaque fois qu’une nouvelle session TCP doit être resouverte, généralement pour demander des fichiers ou des informations au serveur, ou pour fournir des informations.</span><span class="sxs-lookup"><span data-stu-id="120e6-390">Proxy authentication takes place whenever a new TCP session must be spun up, commonly to request files or info from the server, or to supply info.</span></span> <span data-ttu-id="120e6-391">Par exemple, vous pouvez voir l’authentification proxy autour des requêtes HTTP GET ou HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="120e6-391">For example, you may see proxy authentication around HTTP GET or HTTP POST requests.</span></span> <span data-ttu-id="120e6-392">Si vous souhaitez voir les images dans laquelle vous authentifier les demandes dans votre suivi, ajoutez la colonne « Résumé NTLMSSP » à Netmon et filtrez pour  `.property.NTLMSSPSummary` .</span><span class="sxs-lookup"><span data-stu-id="120e6-392">If you want to see the frames where you are authenticating requests in your trace, add the 'NTLMSSP Summary' column to Netmon and filter for  `.property.NTLMSSPSummary`.</span></span> <span data-ttu-id="120e6-393">Pour voir la durée de l’authentification, ajoutez la colonne Time Delta.</span><span class="sxs-lookup"><span data-stu-id="120e6-393">To see how long the authentication is taking, add the Time Delta column.</span></span>

<span data-ttu-id="120e6-394">Pour ajouter une colonne à Netmon :</span><span class="sxs-lookup"><span data-stu-id="120e6-394">To add a column to Netmon:</span></span>

1. <span data-ttu-id="120e6-395">Cliquez avec le bouton droit sur une colonne telle que **Description.**</span><span class="sxs-lookup"><span data-stu-id="120e6-395">Right-click on a column such as **Description**.</span></span>
2. <span data-ttu-id="120e6-396">Cliquez **sur Choisir les colonnes.**</span><span class="sxs-lookup"><span data-stu-id="120e6-396">Click **Choose Columns**.</span></span>
3. <span data-ttu-id="120e6-397">Recherchez _le résumé NTLMSSP_ et _le delta_ du temps dans la liste, puis cliquez sur **Ajouter.**</span><span class="sxs-lookup"><span data-stu-id="120e6-397">Locate _NTLMSSP Summary_ and _Time Delta_ in the list and click **Add**.</span></span>
4. <span data-ttu-id="120e6-398">Déplacez les nouvelles colonnes en place avant ou derrière la colonne _Description_ afin de pouvoir les lire côte à côte.</span><span class="sxs-lookup"><span data-stu-id="120e6-398">Move the new columns into place before or behind the _Description_ column so you can read them side-by-side.</span></span>
5. <span data-ttu-id="120e6-399">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="120e6-399">Click **OK**.</span></span>

<span data-ttu-id="120e6-400">Même si vous n’ajoutez pas la colonne, le filtre Netmon fonctionne.</span><span class="sxs-lookup"><span data-stu-id="120e6-400">Even if you don't add the column, the Netmon filter will work.</span></span> <span data-ttu-id="120e6-401">Toutefois, votre dépannage sera beaucoup plus facile si vous voyez à quelle étape de l’authentification vous êtes.</span><span class="sxs-lookup"><span data-stu-id="120e6-401">But your troubleshooting will be much easier if you can see what stage of authentication you're in.</span></span>

<span data-ttu-id="120e6-402">Lorsque vous recherchez des instances de l’authentification proxy, n’oubliez pas d’étudier toutes les trames où il existe un défi NTLM ou un message d’authentification.</span><span class="sxs-lookup"><span data-stu-id="120e6-402">When looking for instances of Proxy Authentication, be sure to study all frames where there is an NTLM Challenge, or an Authenticate Message is present.</span></span> <span data-ttu-id="120e6-403">Si nécessaire, cliquez avec le bouton droit sur la partie spécifique du trafic et recherchez le \> protocole TCP Conversations.</span><span class="sxs-lookup"><span data-stu-id="120e6-403">If necessary, right-click the specific piece of traffic and Find Conversations \> TCP.</span></span> <span data-ttu-id="120e6-404">N’ignorez pas les valeurs de delta du temps dans ces conversations.</span><span class="sxs-lookup"><span data-stu-id="120e6-404">Be aware of the Time Delta values in these Conversations.</span></span>

![Suivi Netmon montrant l’authentification proxy, filtrée par conversation.](../media/b640f176-0a52-4bbb-972e-60fb3d6aece2.PNG)

<span data-ttu-id="120e6-406">Un délai de quatre secondes dans l’authentification proxy comme dans Wireshark.</span><span class="sxs-lookup"><span data-stu-id="120e6-406">A four second delay in proxy authentication as seen in Wireshark.</span></span> <span data-ttu-id="120e6-407">Le **delta de** l’heure de la colonne d’image affichée précédente a été effectué en cliquant avec le bouton droit sur le champ du même nom dans les détails de l’image et en sélectionnant Ajouter en tant que colonne.</span><span class="sxs-lookup"><span data-stu-id="120e6-407">The **Time delta from previous displayed frame** column was made via right-clicking the field of the same name in the frame details and selecting Add as Column.</span></span>  <br/> <span data-ttu-id="120e6-408">![Dans Wireshark, la colonne « Time delta from previous displayed frame » peut être réalisée en cliquant avec le bouton droit sur le champ du même nom dans les détails de l’image et en sélectionnant Ajouter en tant que colonne.](../media/f5b7bde4-8067-4ee0-bc7f-e9062ce1ba6f.PNG)</span><span class="sxs-lookup"><span data-stu-id="120e6-408">![In Wireshark, the 'Time delta from previous displayed frame' column can be made via right-clicking the field of the same name in the frame details and selecting Add as Column.](../media/f5b7bde4-8067-4ee0-bc7f-e9062ce1ba6f.PNG)</span></span>

### <a name="dns-performance"></a><span data-ttu-id="120e6-409">Performances DNS</span><span class="sxs-lookup"><span data-stu-id="120e6-409">DNS Performance</span></span>

<span data-ttu-id="120e6-410">La résolution de noms fonctionne mieux et plus rapidement lorsqu’elle est aussi proche que possible du pays du client.</span><span class="sxs-lookup"><span data-stu-id="120e6-410">Name resolution works best and most quickly when it takes place as close to the client's country as possible.</span></span>

<span data-ttu-id="120e6-411">Si la résolution de nom DNS a lieu, elle peut ajouter des secondes aux chargements de page.</span><span class="sxs-lookup"><span data-stu-id="120e6-411">If DNS name resolution is taking place overseas, it can add seconds to page loads.</span></span> <span data-ttu-id="120e6-412">Dans l’idéal, la résolution de nom se produit en moins de 100 ms.</span><span class="sxs-lookup"><span data-stu-id="120e6-412">Ideally, name resolution happens in under 100ms.</span></span> <span data-ttu-id="120e6-413">Si ce n’est pas le cas, vous devez poursuivre l’examen.</span><span class="sxs-lookup"><span data-stu-id="120e6-413">If not, you should do further investigation.</span></span>

> [!TIP]
> <span data-ttu-id="120e6-414">Vous ne savez pas comment fonctionne la connectivité client dans Office 365 ?</span><span class="sxs-lookup"><span data-stu-id="120e6-414">Not sure how Client Connectivity works in Office 365?</span></span> <span data-ttu-id="120e6-415">Jetez un coup d’œil au document référence de connectivité [client ici.](https://technet.microsoft.com/library/dn741250.aspx)</span><span class="sxs-lookup"><span data-stu-id="120e6-415">Take a look at the Client Connectivity Reference document [here](https://technet.microsoft.com/library/dn741250.aspx).</span></span>

#### <a name="tools"></a><span data-ttu-id="120e6-416">Outils</span><span class="sxs-lookup"><span data-stu-id="120e6-416">Tools</span></span>

- <span data-ttu-id="120e6-417">Netmon</span><span class="sxs-lookup"><span data-stu-id="120e6-417">Netmon</span></span>
- <span data-ttu-id="120e6-418">Wireshark</span><span class="sxs-lookup"><span data-stu-id="120e6-418">Wireshark</span></span>
- <span data-ttu-id="120e6-419">PsPing</span><span class="sxs-lookup"><span data-stu-id="120e6-419">PsPing</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="120e6-420">Ce qu’il faut rechercher</span><span class="sxs-lookup"><span data-stu-id="120e6-420">What to look for</span></span>

<span data-ttu-id="120e6-421">L’analyse des performances DNS est généralement un autre travail pour un suivi réseau.</span><span class="sxs-lookup"><span data-stu-id="120e6-421">Analyzing DNS performance is typically another job for a network trace.</span></span> <span data-ttu-id="120e6-422">Toutefois, le PsPing est également utile dans ou en dehors, une cause possible.</span><span class="sxs-lookup"><span data-stu-id="120e6-422">However, PsPing is also helpful in ruling in, or out, a possible cause.</span></span>

<span data-ttu-id="120e6-423">Le trafic DNS est basé sur les demandes TCP et UDP et les réponses sont clairement marquées avec un ID qui vous aidera à faire correspondre une demande spécifique à sa réponse spécifique.</span><span class="sxs-lookup"><span data-stu-id="120e6-423">DNS traffic is based on TCP and UDP requests and responses are clearly marked with an ID that will help to match a specific request with its specific response.</span></span> <span data-ttu-id="120e6-424">Le trafic DNS s’affichera lorsque, par exemple, SharePoint Online utilise un nom de réseau ou une URL sur une page web.</span><span class="sxs-lookup"><span data-stu-id="120e6-424">You'll see DNS traffic when, for example, SharePoint Online uses a network name or URL on a web page.</span></span> <span data-ttu-id="120e6-425">En règle générale, la majeure partie de ce trafic, sauf lors du transfert de zones, s’exécute sur UDP.</span><span class="sxs-lookup"><span data-stu-id="120e6-425">As a rule of thumb, most of this traffic, except when transferring Zones, runs over UDP.</span></span>

<span data-ttu-id="120e6-426">Dans Netmon et Wireshark, le filtre le plus simple qui vous permet d’examiner le trafic DNS est simplement `dns` .</span><span class="sxs-lookup"><span data-stu-id="120e6-426">In both Netmon and Wireshark, the most basic filter that will let you look at DNS traffic is simply `dns`.</span></span> <span data-ttu-id="120e6-427">N’oubliez pas d’utiliser des cas inférieurs lors de la spécification du filtre.</span><span class="sxs-lookup"><span data-stu-id="120e6-427">Be sure to use lower case when specifying the filter.</span></span> <span data-ttu-id="120e6-428">N’oubliez pas de vider votre cache de résolution DNS avant de commencer à reproduire le problème sur votre ordinateur client.</span><span class="sxs-lookup"><span data-stu-id="120e6-428">Remember to flush your DNS resolver cache before you begin to reproduce the issue on your client computer.</span></span> <span data-ttu-id="120e6-429">Par exemple, si vous avez un chargement de page SharePoint Online lent pour la page d’accueil, vous devez fermer tous les navigateurs, ouvrir un nouveau navigateur, démarrer le suivi, vider votre cache de résolution DNS et parcourir votre site SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="120e6-429">For example, if you have a slow SharePoint Online page load for the Home page, you should close all browsers, open a new browser, start tracing, flush your DNS resolver cache, and browse to your SharePoint Online site.</span></span> <span data-ttu-id="120e6-430">Une fois la page entière résolue, vous devez arrêter et enregistrer le suivi.</span><span class="sxs-lookup"><span data-stu-id="120e6-430">Once the entire page resolves, you should stop and save the trace.</span></span>

![Un filtre de base pour DNS dans Netmon est DNS.](../media/1bebc118-ca13-45f3-803f-ab73e7af401d.png)

<span data-ttu-id="120e6-432">Vous souhaitez examiner le décalage de temps ici.</span><span class="sxs-lookup"><span data-stu-id="120e6-432">You want to look at the time offset here.</span></span> <span data-ttu-id="120e6-433">Il peut également être utile d’ajouter la colonne **Time Delta** à Netmon, ce que vous pouvez faire en effectuant les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="120e6-433">And it may be helpful to add the **Time Delta** column to Netmon which you can do by completing these steps:</span></span>

1. <span data-ttu-id="120e6-434">Cliquez avec le bouton droit sur une colonne telle que **Description.**</span><span class="sxs-lookup"><span data-stu-id="120e6-434">Right-click on a column such as **Description**.</span></span>
2. <span data-ttu-id="120e6-435">Cliquez **sur Choisir les colonnes.**</span><span class="sxs-lookup"><span data-stu-id="120e6-435">Click **Choose Columns**.</span></span>
3. <span data-ttu-id="120e6-436">Recherchez _Le delta du_ temps dans la liste, puis cliquez sur **Ajouter.**</span><span class="sxs-lookup"><span data-stu-id="120e6-436">Locate _Time Delta_ in the list and click **Add**.</span></span>
4. <span data-ttu-id="120e6-437">Déplacez la nouvelle colonne en place avant ou derrière la colonne _Description_ afin de pouvoir les lire côte à côte.</span><span class="sxs-lookup"><span data-stu-id="120e6-437">Move the new column into place before or behind the _Description_ column so you can read them side-by-side.</span></span>
5. <span data-ttu-id="120e6-438">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="120e6-438">Click **OK**.</span></span>

<span data-ttu-id="120e6-439">Si vous trouvez une requête intéressante, envisagez de l’isoler en cliquant avec le bouton droit sur cette requête dans le panneau Détails de l’image, en choisissant **Rechercher des conversations** \> **DNS**.</span><span class="sxs-lookup"><span data-stu-id="120e6-439">If you find a query of interest, consider isolating it by right-clicking that query in the frame details panel, choosing **Find Conversations** \> **DNS**.</span></span> <span data-ttu-id="120e6-440">Notez que le panneau Conversations réseau passe directement à la conversation spécifique dans son journal du trafic UDP.</span><span class="sxs-lookup"><span data-stu-id="120e6-440">Notice that the Network Conversations panel jumps right to the specific conversation in its log of UDP traffic.</span></span>

![Une trace Netmon de la charge Outlook Online filtrée par DNS, et l’utilisation de Find Conversations, puis DNS pour affiner les résultats.](../media/763cf20e-7b48-4a37-9449-c9978cfe118b.PNG)

<span data-ttu-id="120e6-442">Dans Wireshark, vous pouvez effectuer une colonne pour le temps DNS.</span><span class="sxs-lookup"><span data-stu-id="120e6-442">In Wireshark you can make a column for DNS time.</span></span> <span data-ttu-id="120e6-443">Prenez votre trace (ou ouvrez un suivi) dans Wireshark et filtrez par , ou `dns` plus utilement,  `dns.time` .</span><span class="sxs-lookup"><span data-stu-id="120e6-443">Take your trace (or open a trace) in Wireshark and filter by `dns`, or, more helpfully,  `dns.time`.</span></span> <span data-ttu-id="120e6-444">Cliquez sur une requête DNS et, dans le panneau affichant les détails,  `Domain Name System (response)` développez-les.</span><span class="sxs-lookup"><span data-stu-id="120e6-444">Click on any DNS query, and, in the panel showing details, expand the  `Domain Name System (response)` details.</span></span> <span data-ttu-id="120e6-445">Vous verrez un champ pour le temps (par exemple, `[Time: 0.001111100 seconds]` .</span><span class="sxs-lookup"><span data-stu-id="120e6-445">You'll see a field for time (for example, `[Time: 0.001111100 seconds]`.</span></span> <span data-ttu-id="120e6-446">Cliquez avec le bouton droit sur cette fois et **sélectionnez Appliquer en tant que colonne.**</span><span class="sxs-lookup"><span data-stu-id="120e6-446">Right-click this time and select **Apply as Column**.</span></span> <span data-ttu-id="120e6-447">Vous aurez ainsi une colonne **Time** pour un tri plus rapide de votre suivi.</span><span class="sxs-lookup"><span data-stu-id="120e6-447">This will give you a **Time** column for quicker sorting of your trace.</span></span> <span data-ttu-id="120e6-448">Cliquez sur la nouvelle colonne pour trier en fonction des valeurs décro anses pour voir quel appel DNS a pris le plus de temps à résoudre.</span><span class="sxs-lookup"><span data-stu-id="120e6-448">Click on the new column to sort by descending values to see which DNS call took the longest to resolve.</span></span>

[<span data-ttu-id="120e6-449">Une recherche sur SharePoint Online filtrée dans Wireshark par dns.time (en minuscules), avec l’heure des détails dans une colonne et triée par ordre croissant.</span><span class="sxs-lookup"><span data-stu-id="120e6-449">A browse of SharePoint Online filtered in Wireshark by (lowercase) dns.time, with the time from the details made into a column and sorted ascending.</span></span>](../media/1439dcc2-12ff-4ee2-9ef3-1484cf79c384.PNG)

<span data-ttu-id="120e6-450">Si vous souhaitez faire plus d’investigation sur le temps de résolution DNS, essayez un PsPing sur le port DNS utilisé par TCP (par exemple,  `psping <IP address of DNS server>:53` ) .</span><span class="sxs-lookup"><span data-stu-id="120e6-450">If you would like to do more investigation of the DNS resolution time, try a PsPing against the DNS port used by TCP (for example,  `psping <IP address of DNS server>:53`) .</span></span> <span data-ttu-id="120e6-451">Voyez-vous toujours un problème de performances ?</span><span class="sxs-lookup"><span data-stu-id="120e6-451">Do you still see a performance issue?</span></span> <span data-ttu-id="120e6-452">Si vous le faites, le problème est plus susceptible d’être un problème de réseau plus large qu’un problème spécifique de l’application DNS que vous touchez pour résoudre le problème.</span><span class="sxs-lookup"><span data-stu-id="120e6-452">If you do, then the problem is more likely to be a broader network issue than an issue of specific the DNS application you're hitting to do resolution.</span></span> <span data-ttu-id="120e6-453">Il est également intéressant de mentionner, là encore, qu’un test ping sur outlook.office365.com vous indiquera où la résolution de noms DNS pour Outlook Online a lieu (par exemple, outlook-namnorthwest.office365.com).</span><span class="sxs-lookup"><span data-stu-id="120e6-453">It's also worth mentioning, again, that a ping to outlook.office365.com will tell you where DNS name resolution for Outlook Online is taking place (for example, outlook-namnorthwest.office365.com).</span></span>

<span data-ttu-id="120e6-454">Si le problème semble spécifique au DNS, il peut être nécessaire de contacter votre service informatique pour examiner les configurations DNS et les forwardeurs DNS pour examiner ce problème plus en détail.</span><span class="sxs-lookup"><span data-stu-id="120e6-454">If the issue looks to be DNS specific, it may be necessary to contact your IT department to look at DNS configurations and DNS Forwarders to further investigate this issue.</span></span>

### <a name="proxy-scalability"></a><span data-ttu-id="120e6-455">Évolutivité du proxy</span><span class="sxs-lookup"><span data-stu-id="120e6-455">Proxy Scalability</span></span>

<span data-ttu-id="120e6-456">Les services tels qu’Outlook Online dans Office 365 accordent aux clients plusieurs connexions à long terme.</span><span class="sxs-lookup"><span data-stu-id="120e6-456">Services like Outlook Online in Office 365 grant clients multiple long-term connections.</span></span> <span data-ttu-id="120e6-457">Par conséquent, chaque utilisateur peut utiliser davantage de connexions nécessitant une durée de vie plus longue.</span><span class="sxs-lookup"><span data-stu-id="120e6-457">Therefore, each user may use more connections that require a longer life.</span></span>

#### <a name="tools"></a><span data-ttu-id="120e6-458">Outils</span><span class="sxs-lookup"><span data-stu-id="120e6-458">Tools</span></span>

<span data-ttu-id="120e6-459">Mathématiques</span><span class="sxs-lookup"><span data-stu-id="120e6-459">Math</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="120e6-460">Ce qu’il faut rechercher</span><span class="sxs-lookup"><span data-stu-id="120e6-460">What to look for</span></span>

<span data-ttu-id="120e6-461">Il n’existe aucun outil de suivi ou de dépannage réseau spécifique à ce problème.</span><span class="sxs-lookup"><span data-stu-id="120e6-461">There is no network trace or troubleshooting tool specific to this.</span></span> <span data-ttu-id="120e6-462">Au lieu de cela, il est basé sur des calculs de bande passante en fonction de limitations et d’autres variables.</span><span class="sxs-lookup"><span data-stu-id="120e6-462">Instead, it's based upon bandwidth calculations given limitations and other variables.</span></span>

### <a name="tcp-max-segment-size"></a><span data-ttu-id="120e6-463">Taille maximale du segment TCP</span><span class="sxs-lookup"><span data-stu-id="120e6-463">TCP Max Segment Size</span></span>

<span data-ttu-id="120e6-464">Se trouve dans la syn - SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="120e6-464">Found in the SYN - SYN/ACK.</span></span>  <span data-ttu-id="120e6-465">Effectuez cette vérification dans toute trace réseau de performances que vous avez prise pour vous assurer que les paquets TCP sont configurés pour transporter la quantité maximale de données possible.</span><span class="sxs-lookup"><span data-stu-id="120e6-465">Do this check in any performance network trace you've taken to ensure that TCP packets are configured to carry the maximum amount of data possible.</span></span>

<span data-ttu-id="120e6-466">L’objectif est d’obtenir un MSS de 1 460 octets pour la transmission des données.</span><span class="sxs-lookup"><span data-stu-id="120e6-466">The goal is to see a MSS of 1460 bytes for transmission of data.</span></span> <span data-ttu-id="120e6-467">Si vous êtes derrière un proxy ou si vous utilisez un nat, n’oubliez pas d’exécuter ce test à partir du client vers proxy/sortie/NAT, et du proxy/sortie/NAT vers Office 365 pour obtenir de meilleurs résultats !</span><span class="sxs-lookup"><span data-stu-id="120e6-467">If you're behind a proxy, or you are using a NAT, remember to run this test from client to proxy/egress/NAT, and from proxy/egress/NAT to Office 365 for best results!</span></span> <span data-ttu-id="120e6-468">Il s’existe des sessions TCP différentes.</span><span class="sxs-lookup"><span data-stu-id="120e6-468">These are different TCP sessions.</span></span>

#### <a name="tools"></a><span data-ttu-id="120e6-469">Outils</span><span class="sxs-lookup"><span data-stu-id="120e6-469">Tools</span></span>

<span data-ttu-id="120e6-470">Netmon</span><span class="sxs-lookup"><span data-stu-id="120e6-470">Netmon</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="120e6-471">Ce qu’il faut rechercher</span><span class="sxs-lookup"><span data-stu-id="120e6-471">What to look for</span></span>

<span data-ttu-id="120e6-472">La taille maximale du segment TCP (MSS) est un autre paramètre de l’établir en trois temps dans votre suivi réseau, ce qui signifie que vous trouverez les données dont vous avez besoin dans le paquet SYN - SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="120e6-472">TCP Max Segment Size (MSS) is another parameter of the three-way handshake in your network trace, that means you'll find the data you need in the SYN - SYN/ACK packet.</span></span> <span data-ttu-id="120e6-473">MSS est en fait assez simple à voir.</span><span class="sxs-lookup"><span data-stu-id="120e6-473">MSS is actually pretty simple to see.</span></span>

<span data-ttu-id="120e6-474">Ouvrez la trace réseau de performances dont vous avez et trouvez la connexion qui vous intéresse, ou qui illustre le problème de performances.</span><span class="sxs-lookup"><span data-stu-id="120e6-474">Open any performance network trace you have and find the connection you're curious about, or that demonstrates the performance problem.</span></span>

> [!NOTE]
> <span data-ttu-id="120e6-475">Si vous recherchez un suivi et que vous avez besoin de trouver le trafic pertinent pour votre conversation, filtrez par l’adresse IP du client, ou l’ADRESSE IP du serveur proxy ou du point de sortie, ou les deux.</span><span class="sxs-lookup"><span data-stu-id="120e6-475">If you are looking at a trace and need to find the traffic relevant to your conversation, filter by the IP of the Client, or the IP of the proxy server or egress point, or both.</span></span> <span data-ttu-id="120e6-476">Pour ce faire, vous devrez tester l’URL que vous testez pour l’adresse IP d’Office 365 dans le suivi, puis filtrer en fonction de celle-ci.</span><span class="sxs-lookup"><span data-stu-id="120e6-476">Going directly, you will need to ping the URL that you're testing for the IP address of Office 365 in the trace, and filter by it.</span></span>

<span data-ttu-id="120e6-477">Vous regardez la deuxième main de suivi ?</span><span class="sxs-lookup"><span data-stu-id="120e6-477">Looking at the trace second-hand?</span></span> <span data-ttu-id="120e6-478">Essayez d’utiliser des filtres pour vous orienter.</span><span class="sxs-lookup"><span data-stu-id="120e6-478">Try using filters to orient yourself.</span></span> <span data-ttu-id="120e6-479">Dans Netmon, exécutez une recherche basée sur l’URL, par `Containsbin(framedata, ascii, "sphybridExample")` exemple, prenez note du numéro d’image.</span><span class="sxs-lookup"><span data-stu-id="120e6-479">In Netmon, run a search based on the URL, such as `Containsbin(framedata, ascii, "sphybridExample")`, take note of the frame number.</span></span>

<span data-ttu-id="120e6-480">Dans Wireshark, utilisez quelque chose comme  `frame contains "sphybridExample"` .</span><span class="sxs-lookup"><span data-stu-id="120e6-480">In Wireshark use something like  `frame contains "sphybridExample"`.</span></span> <span data-ttu-id="120e6-481">Si vous remarquez que vous avez trouvé le trafic Winsock distant (RWS) (il peut apparaître comme un [PSH, ACK] dans Wireshark), n’oubliez pas que les connexions RWS sont visibles peu de temps avant les syn/AK pertinents, comme expliqué précédemment.</span><span class="sxs-lookup"><span data-stu-id="120e6-481">If you notice that you've found Remote Winsock (RWS) traffic (it may appear as a [PSH, ACK] in Wireshark), remember that RWS connects can be seen shortly before relevant SYN - SYN/ACKs, as discussed earlier.</span></span>

<span data-ttu-id="120e6-482">À ce stade, vous pouvez enregistrer le numéro  d’image, déposer le filtre, cliquer sur Tout le trafic dans la fenêtre Conversations réseau dans Netmon pour examiner la syn la plus proche.</span><span class="sxs-lookup"><span data-stu-id="120e6-482">At this point, you can record the frame number, drop the filter, click **All Traffic** in the Network Conversations window in Netmon to look at the nearest SYN.</span></span>

<span data-ttu-id="120e6-483">Plus important encore, si vous n’avez reçu aucune des informations d’adresse IP au moment du suivi, la recherche de votre URL dans la trace (partie de , par exemple), vous donnera des adresses IP pour filtrer `sphybridExample-my.sharepoint.com` par.</span><span class="sxs-lookup"><span data-stu-id="120e6-483">Importantly, if you didn't receive any of the IP address information at the time of the trace, finding your URL in the trace (part of `sphybridExample-my.sharepoint.com`, for example), will give you IP addresses to filter by.</span></span>

<span data-ttu-id="120e6-484">Recherchez la connexion dans le suivi que vous souhaitez voir.</span><span class="sxs-lookup"><span data-stu-id="120e6-484">Locate the connection in the trace that you're interested in seeing.</span></span> <span data-ttu-id="120e6-485">Pour ce faire, vous pouvez analyser le suivi, en filtrant les adresses IP ou en sélectionnant des ID de conversation spécifiques à l’aide de la fenêtre Conversations réseau dans Netmon.</span><span class="sxs-lookup"><span data-stu-id="120e6-485">You may do this by either scanning the trace, by filtering by IP addresses, or by selecting specific Conversation IDs using the Network Conversations window in Netmon.</span></span> <span data-ttu-id="120e6-486">Une fois que vous avez trouvé le paquet SYN, développez TCP (dans Netmon) ou le protocole de contrôle de transmission (dans Wireshark) dans le panneau Détails de l’image.</span><span class="sxs-lookup"><span data-stu-id="120e6-486">Once you've found the SYN packet, expand TCP (in Netmon), or Transmission Control Protocol (in Wireshark) in the Frame Details panel.</span></span> <span data-ttu-id="120e6-487">Développez options TCP et MaxSegmentSize.</span><span class="sxs-lookup"><span data-stu-id="120e6-487">Expand TCP Options and MaxSegmentSize.</span></span> <span data-ttu-id="120e6-488">Recherchez le cadre SYN-ACK associé et développez les options TCP et MaxSegmentSize.</span><span class="sxs-lookup"><span data-stu-id="120e6-488">Locate the related SYN-ACK frame and Expand TCP Options and MaxSegmentSize.</span></span> <span data-ttu-id="120e6-489">La plus petite des deux valeurs sera votre taille maximale de segment.</span><span class="sxs-lookup"><span data-stu-id="120e6-489">The smaller of the two values will be your Maximum Segment Size.</span></span> <span data-ttu-id="120e6-490">Dans cette image, j’utilise la colonne intégrée dans Netmon appelée Résolution des problèmes TCP.</span><span class="sxs-lookup"><span data-stu-id="120e6-490">In this picture, I make use of the built-in Column in Netmon called TCP Troubleshoot.</span></span>

![Suivi réseau filtré dans Netmon à l’aide des colonnes intégrées.](../media/e073df13-71f8-497a-83b4-bb9f70bd9833.PNG)

<span data-ttu-id="120e6-492">La colonne intégrée se trouve en haut du panneau **Détails du** cadre.</span><span class="sxs-lookup"><span data-stu-id="120e6-492">The built-in column is at the top of the **Frame Details** panel.</span></span> <span data-ttu-id="120e6-493">(Pour revenir à votre affichage normal, cliquez à nouveau sur **Colonnes,** puis choisissez **Fuseau horaire.)**</span><span class="sxs-lookup"><span data-stu-id="120e6-493">(To switch back to your normal view, click **Columns** again, and then choose **Time Zone**.)</span></span>

![Où trouver la liste déroulante des colonnes pour l’option Résolution des problèmes TCP (en haut du résumé de la trame).](../media/64fd4baa-a872-4f07-b959-752d7d37fd62.PNG)

<span data-ttu-id="120e6-495">Voici un suivi filtré dans Wireshark.</span><span class="sxs-lookup"><span data-stu-id="120e6-495">Here's a filtered trace in Wireshark.</span></span> <span data-ttu-id="120e6-496">Il existe un filtre spécifique à la valeur MSS ( `tcp.options.mss` ).</span><span class="sxs-lookup"><span data-stu-id="120e6-496">There is a filter specific to the MSS value ( `tcp.options.mss`).</span></span> <span data-ttu-id="120e6-497">Les images d’une liaison SYN, SYN/ACK et ACK sont liées en bas de l’équivalent Wireshark aux détails de trame (donc, image 47 ACK, liens vers 46 SYN/ACK, liens vers 43 SYN) pour faciliter ce type de travail.</span><span class="sxs-lookup"><span data-stu-id="120e6-497">The frames of a SYN, SYN/ACK, ACK handshake are linked at the bottom of the Wireshark equivalent to Frame Details (so frame 47 ACK, links to 46 SYN/ACK, links to 43 SYN) to make this kind of work easier.</span></span>

![Suivi filtré dans Wireshark par tcp.options.mss pour la taille de segment maximale (MSS).](../media/51e278db-801b-48bc-9b68-87cf92f03fd6.PNG)

<span data-ttu-id="120e6-499">Si vous devez vérifier **l’accusé de** réception sélectif (rubrique suivante de cette matrice), ne fermez pas votre trace !</span><span class="sxs-lookup"><span data-stu-id="120e6-499">If you need to check **Selective Acknowledgment** (next topic in this matrix), don't close your trace!</span></span>

### <a name="selective-acknowledgment"></a><span data-ttu-id="120e6-500">Accusé de réception sélectif</span><span class="sxs-lookup"><span data-stu-id="120e6-500">Selective Acknowledgment</span></span>

<span data-ttu-id="120e6-501">Se trouve dans la syn - SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="120e6-501">Found in the SYN - SYN/ACK.</span></span> <span data-ttu-id="120e6-502">Doit être signalé comme autorisé dans SYN et SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="120e6-502">Must be reported as Permitted in both SYN and SYN/ACK.</span></span> <span data-ttu-id="120e6-503">L’accusé de réception sélectif permet une retransmission plus fluide des données lorsqu’un ou plusieurs paquets sont manquants.</span><span class="sxs-lookup"><span data-stu-id="120e6-503">Selective Acknowledgment (SACK) allows for smoother retransmission of data when a packet or packets go missing.</span></span> <span data-ttu-id="120e6-504">Les appareils peuvent désactiver cette fonctionnalité, ce qui peut entraîner des problèmes de performances.</span><span class="sxs-lookup"><span data-stu-id="120e6-504">Devices can disable this feature, which can lead to performance problems.</span></span>

<span data-ttu-id="120e6-505">Si vous êtes derrière un proxy ou si vous utilisez un nat, n’oubliez pas d’exécuter ce test à partir du client vers proxy/sortie/NAT, et du proxy/sortie/NAT vers Office 365 pour obtenir de meilleurs résultats !</span><span class="sxs-lookup"><span data-stu-id="120e6-505">If you're behind a proxy, or you are using a NAT, remember to run this test from client to proxy/egress/NAT, and from proxy/egress/NAT to Office 365 for best results!</span></span> <span data-ttu-id="120e6-506">Il s’existe des sessions TCP différentes.</span><span class="sxs-lookup"><span data-stu-id="120e6-506">These are different TCP sessions.</span></span>

#### <a name="tools"></a><span data-ttu-id="120e6-507">Outils</span><span class="sxs-lookup"><span data-stu-id="120e6-507">Tools</span></span>

<span data-ttu-id="120e6-508">Netmon</span><span class="sxs-lookup"><span data-stu-id="120e6-508">Netmon</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="120e6-509">Ce qu’il faut rechercher</span><span class="sxs-lookup"><span data-stu-id="120e6-509">What to look for</span></span>

<span data-ttu-id="120e6-510">L’accusé de réception sélectif est un autre paramètre de la poignée de main SYN-SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="120e6-510">Selective Acknowledgment (SACK) is another parameter in the SYN-SYN/ACK handshake.</span></span> <span data-ttu-id="120e6-511">Vous pouvez filtrer votre suivi pour SYN - SYN/ACK de nombreuses façons.</span><span class="sxs-lookup"><span data-stu-id="120e6-511">You can filter your trace for SYN - SYN/ACK many ways.</span></span>

<span data-ttu-id="120e6-512">Recherchez la connexion dans le suivi qui vous intéresse soit en analysant le suivi, en filtrant par adresses IP, soit en cliquant sur un ID de conversation à l’aide de la fenêtre Conversations réseau dans Netmon.</span><span class="sxs-lookup"><span data-stu-id="120e6-512">Locate the connection in the trace that you're interested in seeing either by scanning the trace, filtering by IP addresses, or by clicking a Conversation ID using the Network Conversations window in Netmon.</span></span> <span data-ttu-id="120e6-513">Une fois que vous avez trouvé le paquet SYN, développez TCP dans Netmon ou le protocole de contrôle de transmission dans Wireshark dans la section Détails du cadre.</span><span class="sxs-lookup"><span data-stu-id="120e6-513">Once you've found the SYN packet, expand TCP in Netmon, or Transmission Control Protocol in Wireshark in the Frame Details section.</span></span> <span data-ttu-id="120e6-514">Développez options TCP, puis RESER.</span><span class="sxs-lookup"><span data-stu-id="120e6-514">Expand TCP Options and then SACK.</span></span> <span data-ttu-id="120e6-515">Recherchez le cadre SYN-ACK associé et développez les options TCP et son champ DROIT.</span><span class="sxs-lookup"><span data-stu-id="120e6-515">Locate the related SYN-ACK frame and Expand TCP Options and its SACK field.</span></span> <span data-ttu-id="120e6-516">Assurez-vous que LA COMBINAISON DNS est autorisée dans SYN et SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="120e6-516">Make certain SACK is permitted in both SYN and SYN/ACK.</span></span> <span data-ttu-id="120e6-517">Voici les valeurs DNS comme dans Netmon et Wireshark.</span><span class="sxs-lookup"><span data-stu-id="120e6-517">Here are SACK values as seen in both Netmon and Wireshark.</span></span>

![Accusé de réception sélectif (CAS) dans Netmon à la suite de tcp.flags.syn == 1.](../media/216f556f-5031-4ed2-b066-a0d9b3251fa2.PNG)

![SACK comme dans Wireshark avec le filtre tcp.flags.syn == 1.](../media/0a6e26e5-43dc-403b-adc9-3349a55f4e4b.PNG)

### <a name="dns-geolocation"></a><span data-ttu-id="120e6-520">Géolocalisation DNS</span><span class="sxs-lookup"><span data-stu-id="120e6-520">DNS Geolocation</span></span>

<span data-ttu-id="120e6-521">Où dans le monde Office 365 tente de résoudre votre appel DNS a un impact sur votre vitesse de connexion.</span><span class="sxs-lookup"><span data-stu-id="120e6-521">Where in the world Office 365 tries to resolve your DNS call effects your connection speed.</span></span>

<span data-ttu-id="120e6-522">Dans Outlook Online, une fois la première recherche DNS terminée, l’emplacement de ce DNS sera utilisé pour se connecter à votre centre de données le plus proche.</span><span class="sxs-lookup"><span data-stu-id="120e6-522">In Outlook Online, after the first DNS lookup is completed, the location of that DNS will be used to connect to your nearest datacenter.</span></span> <span data-ttu-id="120e6-523">Vous serez connecté à un serveur CAS Outlook Online, qui utilisera le réseau principal pour vous connecter au centre de données (dC) où vos données sont stockées.</span><span class="sxs-lookup"><span data-stu-id="120e6-523">You will be connected to an Outlook Online CAS server, which will use the backbone network to connect to the datacenter (dC) where your data is stored.</span></span> <span data-ttu-id="120e6-524">Cela est plus rapide.</span><span class="sxs-lookup"><span data-stu-id="120e6-524">This is faster.</span></span>

<span data-ttu-id="120e6-525">Lorsque vous accédez à SharePoint Online, un utilisateur en déplacement est dirigé vers son centre de données actif, c’est-à-dire le centre de données dont l’emplacement est basé sur la base d’accueil de son client SPO (donc, un DC aux États-Unis si l’utilisateur est basé aux États-Unis).</span><span class="sxs-lookup"><span data-stu-id="120e6-525">When accessing SharePoint Online, a user traveling abroad will be directed to their active datacenter -- that's the dC whose location is based on their SPO tenant's home-base (so, a dC in the USA if the user if USA-based).</span></span>

<span data-ttu-id="120e6-526">Lync Online possède des nodes actifs dans plusieurs DC à la fois.</span><span class="sxs-lookup"><span data-stu-id="120e6-526">Lync online has active nodes in more than one dC at a time.</span></span> <span data-ttu-id="120e6-527">Lorsque des demandes sont envoyées pour des instances de Lync Online, le DNS de Microsoft détermine l’endroit d’où la demande est envoyée dans le monde et retourne les adresses IP à partir du DC régional le plus proche où Lync Online est actif.</span><span class="sxs-lookup"><span data-stu-id="120e6-527">When requests are sent for Lync online instances, Microsoft's DNS will determine where in the world the request came from, and return IP addresses from the nearest regional dC where Lync online is active.</span></span>

> [!TIP]
> <span data-ttu-id="120e6-528">Vous avez besoin d’en savoir plus sur la façon dont les clients se connectent à Office 365 ?</span><span class="sxs-lookup"><span data-stu-id="120e6-528">Need to know more about how clients connect to Office 365?</span></span> <span data-ttu-id="120e6-529">Prenons un coup d’œil à l’article de référence [sur](https://technet.microsoft.com/library/dn741250.aspx) la connectivité client (et à ses graphiques utiles).</span><span class="sxs-lookup"><span data-stu-id="120e6-529">Take a look at the [Client Connectivity](https://technet.microsoft.com/library/dn741250.aspx) reference article (and its helpful graphics).</span></span>

#### <a name="tools"></a><span data-ttu-id="120e6-530">Outils</span><span class="sxs-lookup"><span data-stu-id="120e6-530">Tools</span></span>

- <span data-ttu-id="120e6-531">Ping</span><span class="sxs-lookup"><span data-stu-id="120e6-531">Ping</span></span>
- <span data-ttu-id="120e6-532">PsPing</span><span class="sxs-lookup"><span data-stu-id="120e6-532">PsPing</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="120e6-533">Ce qu’il faut rechercher</span><span class="sxs-lookup"><span data-stu-id="120e6-533">What to look for</span></span>

<span data-ttu-id="120e6-534">Dans la plupart des cas, les demandes de résolution de noms des serveurs DNS du client vers les serveurs DNS de Microsoft doivent dans la plupart des cas renvoyer l’adresse IP d’un centre de données régional( dC).</span><span class="sxs-lookup"><span data-stu-id="120e6-534">Requests for name resolution from the client's DNS servers to Microsoft's DNS servers should in most cases result in Microsoft DNS returning the IP address of a regional datacenter (dC).</span></span> <span data-ttu-id="120e6-535">Qu’est-ce que cela signifie pour vous ?</span><span class="sxs-lookup"><span data-stu-id="120e6-535">What does this mean for you?</span></span> <span data-ttu-id="120e6-536">Si votre siège social se trouve à Basere, en Inde, mais que vous êtes en déplacement aux États-Unis, lorsque votre navigateur effectue une demande pour Outlook Online, les serveurs DNS de Microsoft doivent vous remettre des adresses IP aux centres de données aux États-Unis , un centre de données régional.</span><span class="sxs-lookup"><span data-stu-id="120e6-536">If your headquarters are in Bangalore, India, but you are traveling in the United States, when your browser makes a request for Outlook Online, Microsoft's DNS servers should hand you IP addresses to datacenters in the United States -- a regional datacenter.</span></span> <span data-ttu-id="120e6-537">Si le courrier électronique est nécessaire à partir d’Outlook, ces données se déplacent sur le réseau principal rapide de Microsoft entre les centres de données.</span><span class="sxs-lookup"><span data-stu-id="120e6-537">If mail is needed from Outlook, that data will travel across Microsoft's quick backbone network between the datacenters.</span></span>

<span data-ttu-id="120e6-538">DNS fonctionne plus rapidement lorsque la résolution de nom est effectuée aussi près que possible de l’emplacement de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="120e6-538">DNS works fastest when name resolution is done as close to the user location as possible.</span></span> <span data-ttu-id="120e6-539">Si vous êtes en Europe, vous souhaitez passer à un DNS Microsoft en Europe et (dans l’idéal) gérer un centre de données en Europe.</span><span class="sxs-lookup"><span data-stu-id="120e6-539">If you're in Europe, you want to go to a Microsoft DNS in Europe, and (ideally) deal with a datacenter in Europe.</span></span> <span data-ttu-id="120e6-540">Les performances d’un client en Europe allant vers DNS et un centre de données en Amérique seront plus lentes.</span><span class="sxs-lookup"><span data-stu-id="120e6-540">Performance from a client in Europe going to DNS and a datacenter in America will be slower.</span></span>

<span data-ttu-id="120e6-541">Exécutez l’outil Ping outlook.office365.com pour déterminer où votre demande DNS est acheminée dans le monde.</span><span class="sxs-lookup"><span data-stu-id="120e6-541">Run the Ping tool against outlook.office365.com to determine where in the world your DNS request is being routed.</span></span> <span data-ttu-id="120e6-542">Si vous êtes en Europe, vous devriez voir une réponse provenant d’un outlook-emeawest.office365.com.</span><span class="sxs-lookup"><span data-stu-id="120e6-542">If you are in Europe, you should see a reply from something like outlook-emeawest.office365.com.</span></span> <span data-ttu-id="120e6-543">Dans les Amériques, attendez-vous à ce qu’un outlook-namnorthwest.office365.com.</span><span class="sxs-lookup"><span data-stu-id="120e6-543">In the Americas, expect something like outlook-namnorthwest.office365.com.</span></span>

<span data-ttu-id="120e6-544">Ouvrez l’invite de commandes sur l’ordinateur client (via la cmd Démarrer l’exécuter ou la \> \> \> cmd de type de clé Windows).</span><span class="sxs-lookup"><span data-stu-id="120e6-544">Open the command prompt on the client computer (via Start \> Run \> cmd or Windows key \> type cmd).</span></span> <span data-ttu-id="120e6-545">Tapez ping outlook.office365.com puis appuyez sur Entrée.</span><span class="sxs-lookup"><span data-stu-id="120e6-545">Type ping outlook.office365.com and press ENTER.</span></span> <span data-ttu-id="120e6-546">N’oubliez pas de spécifier -4 si vous souhaitez spécifier un ping via IPv4.</span><span class="sxs-lookup"><span data-stu-id="120e6-546">Remember, to specify -4 if you want to specify to ping via IPv4.</span></span> <span data-ttu-id="120e6-547">Vous ne pouvez pas obtenir de réponse des paquets ICMP, mais vous devez voir le nom du DNS vers lequel la demande a été acheminée.</span><span class="sxs-lookup"><span data-stu-id="120e6-547">You may fail to get a reply from the ICMP packets, but you should see the name of the DNS to which the request was routed.</span></span> <span data-ttu-id="120e6-548">Si vous souhaitez voir les numéros de latence de cette connexion, essayez PsPing vers l’adresse IP du serveur renvoyée par ping.</span><span class="sxs-lookup"><span data-stu-id="120e6-548">If you want to see the latency numbers for this connection try PsPing to the IP address of the server that is returned by ping.</span></span>

![Commande ping d’outlook.office365.com affichant la résolution dans outlook-namnorthwest.](../media/06c944d5-6159-43ec-aa31-757770695e8b.PNG)

![PSPing vers l’adresse IP renvoyée par la commande ping à outlook.office365.com latence moyenne de 28 millisecondes.](../media/f2b25a75-1a87-4479-b8a7-fa4375683507.PNG)

### <a name="office-365-application-troubleshooting"></a><span data-ttu-id="120e6-551">Résolution des problèmes des applications Office 365</span><span class="sxs-lookup"><span data-stu-id="120e6-551">Office 365 Application Troubleshooting</span></span>

#### <a name="tools"></a><span data-ttu-id="120e6-552">Outils</span><span class="sxs-lookup"><span data-stu-id="120e6-552">Tools</span></span>

- <span data-ttu-id="120e6-553">Netmon</span><span class="sxs-lookup"><span data-stu-id="120e6-553">Netmon</span></span>
- <span data-ttu-id="120e6-554">HTTPWatch</span><span class="sxs-lookup"><span data-stu-id="120e6-554">HTTPWatch</span></span>
- <span data-ttu-id="120e6-555">Console F12 dans le navigateur</span><span class="sxs-lookup"><span data-stu-id="120e6-555">F12 Console in the browser</span></span>

<span data-ttu-id="120e6-556">Nous ne couvrent pas les outils utilisés dans le dépannage propre à l’application dans cet article propre au réseau.</span><span class="sxs-lookup"><span data-stu-id="120e6-556">We don't cover tools used in application-specific troubleshooting in this network-specific article.</span></span> <span data-ttu-id="120e6-557">Mais vous trouverez des ressources que vous *pouvez* utiliser [sur cette page.](https://support.office.com/article/Network-planning-and-performance-tuning-for-Office-365-e5f1228c-da3c-4654-bf16-d163daee8848)</span><span class="sxs-lookup"><span data-stu-id="120e6-557">But you'll find resources you  *can*  use [on this page](https://support.office.com/article/Network-planning-and-performance-tuning-for-Office-365-e5f1228c-da3c-4654-bf16-d163daee8848).</span></span>

## <a name="related-topics"></a><span data-ttu-id="120e6-558">Rubriques connexes</span><span class="sxs-lookup"><span data-stu-id="120e6-558">Related Topics</span></span>

[<span data-ttu-id="120e6-559">Gestion des points de terminaison Office 365</span><span class="sxs-lookup"><span data-stu-id="120e6-559">Managing Office 365 endpoints</span></span>](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a)

[<span data-ttu-id="120e6-560">Points de terminaison Office 365 - FAQ</span><span class="sxs-lookup"><span data-stu-id="120e6-560">Office 365 endpoints FAQ</span></span>](https://support.office.com/article/d4088321-1c89-4b96-9c99-54c75cae2e6d)
