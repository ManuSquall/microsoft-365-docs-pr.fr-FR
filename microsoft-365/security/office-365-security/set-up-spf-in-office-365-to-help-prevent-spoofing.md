---
title: Configurer SPF pour empêcher l’usurpation
f1.keywords:
- CSH
ms.author: tracyp
author: MSFTTracyP
manager: dansimp
ms.date: 11/21/2019
audience: ITPro
ms.topic: how-to
ms.service: O365-seccomp
localization_priority: Priority
search.appverid:
- MET150
ms.assetid: 71373291-83d2-466f-86ea-fc61493743a6
ms.collection:
- M365-security-compliance
ms.custom:
- seo-marvel-apr2020
description: Découvrez comment mettre à jour un enregistrement DNS (service de nom de domaine) afin que vous puissiez utiliser SPF (Sender Policy Framework) avec votre domaine personnalisé dans Office 365.
ms.openlocfilehash: a6cd2a0cf60812bb874c1be63fb2d294cda6d6aa
ms.sourcegitcommit: 31be333178b934c519f419656f4c3a53e1beffdc
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/16/2021
ms.locfileid: "49881716"
---
# <a name="set-up-spf-to-help-prevent-spoofing"></a><span data-ttu-id="bce2b-103">Configurer SPF pour empêcher l’usurpation</span><span class="sxs-lookup"><span data-stu-id="bce2b-103">Set up SPF to help prevent spoofing</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender-for-office.md)]

- [<span data-ttu-id="bce2b-104">Conditions préalables<a name="UpdateSPFTXT"></a></span><span class="sxs-lookup"><span data-stu-id="bce2b-104">Prerequisites <a name="UpdateSPFTXT"></a></span></span>](#updating-your-spf-txt-record-for-office-365-a-nameUpdateSPFTXT)
- [<span data-ttu-id="bce2b-105">Créer ou mettre à jour votre enregistrement SPF TXT pour Office 365 <a name="CreateUpdateSPFTXT"></a></span><span class="sxs-lookup"><span data-stu-id="bce2b-105">Create / update your SPF TXT record for Office 365 <a name="CreateUpdateSPFTXT"></a></span></span>](#to-create-or-update-your-spf-txt-record-a-namecreateupdatespftxta)
    - [<span data-ttu-id="bce2b-106">Comment gérer les sous-domaines ?<a name="SPFandSubdomains"></a></span><span class="sxs-lookup"><span data-stu-id="bce2b-106">How to handle subdomains? <a name="SPFandSubdomains"></a></span></span>](#how-to-handle-subdomains-a-namespfandsubdomainsa)
- [<span data-ttu-id="bce2b-107">Résolution des problèmes et meilleures pratiques pour SPF <a name="TshootingSPF"></a></span><span class="sxs-lookup"><span data-stu-id="bce2b-107">SPF troubleshooting and best practices <a name="TshootingSPF"></a></span></span>](#next-steps-after-you-set-up-spf-for-office-365-a-nametshootingspfa)
- [<span data-ttu-id="bce2b-108">Exemples de SPF avancés <a name="AdvancedSPFexs"></a></span><span class="sxs-lookup"><span data-stu-id="bce2b-108">Advanced SPF examples <a name="AdvancedSPFexs"></a></span></span>](#more-information-about-spf-a-nameadvancedspfexsa)

<span data-ttu-id="bce2b-109">Cet article vous explique comment mettre à jour un enregistrement DNS (Domain Name Service) afin que vous puissiez utiliser l’authentification de messagerie SPF (Sender Policy Framework) avec votre domaine personnalisé dans Office 365.</span><span class="sxs-lookup"><span data-stu-id="bce2b-109">This article describes how to update an Domain Name Service (DNS) record so that you can use Sender Policy Framework (SPF)  email authentication with your custom domain in Office 365.</span></span>

<span data-ttu-id="bce2b-110">L’utilisation de SPF permet de valider les messages sortants envoyés à partir de votre domaine personnalisé.</span><span class="sxs-lookup"><span data-stu-id="bce2b-110">Using SPF helps to validate outbound email sent from your custom domain.</span></span> <span data-ttu-id="bce2b-111">Il s’agit d’une première étape dans la configuration des autres méthodes d’authentification de messagerie recommandées, DMARC et DKIM (deux autres méthodes d’authentification de messagerie prises en charge dans Office 365).</span><span class="sxs-lookup"><span data-stu-id="bce2b-111">It's a first step in setting up other recommended email authentication methods DMARC and DKIM (two further email authentication methods supported in Office 365).</span></span>

## <a name="updating-your-spf-txt-record-for-office-365"></a><span data-ttu-id="bce2b-112">Mettre à jour votre enregistrement TXT SPF pour Office 365<a name="UpdateSPFTXT"></a></span><span class="sxs-lookup"><span data-stu-id="bce2b-112">Updating your SPF TXT record for Office 365 <a name="UpdateSPFTXT"></a></span></span>

> [!IMPORTANT]
> <span data-ttu-id="bce2b-113">Si vous êtes une **petite entreprise** ou que vous ne connaissez pas les adresses IP ou la configuration DNS, appelez votre bureau d’enregistrement de domaines Internet (par exemple</span><span class="sxs-lookup"><span data-stu-id="bce2b-113">If you are a **small business**, or are unfamiliar with IP addresses or DNS configuration, call your Internet domain registrar (ex.</span></span> <span data-ttu-id="bce2b-114">GoDaddy, Bluehost, web.com) pour demander de l’aide sur la configuration DNS de SPF (et toute autre méthode d’authentification des e-mails) .</span><span class="sxs-lookup"><span data-stu-id="bce2b-114">GoDaddy, Bluehost, web.com) to ask for help with DNS configuration of SPF (and any other email authentication method).</span></span> <span data-ttu-id="bce2b-115">*De plus*, si vous n’avez pas acheté d’URL personnalisée ou si vous n’en utilisez pas (en d’autres termes, l’URL que vous et vos clients utilisez pour atteindre Office 365 se termine par **onmicrosoft.com**), SPF a été configuré pour vous dans le service Office 365.</span><span class="sxs-lookup"><span data-stu-id="bce2b-115">*Also*, if you haven't bought, or don't use a custom URL (in other words the URL you and your customers browse to reach Office 365 ends in **onmicrosoft.com**), SPF has been set up for you in the Office 365 service.</span></span> <span data-ttu-id="bce2b-116">Aucune autre étape n’est requise dans ce cas.</span><span class="sxs-lookup"><span data-stu-id="bce2b-116">No further steps are required in that case.</span></span> <span data-ttu-id="bce2b-117">Merci de votre attention.</span><span class="sxs-lookup"><span data-stu-id="bce2b-117">Thanks for reading.</span></span>

<span data-ttu-id="bce2b-118">Avant de mettre à jour l’enregistrement TXT dans le DNS, vous devez rassembler quelques informations et déterminer le format de l’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="bce2b-118">Before you update the TXT record in DNS, you need to gather some information needed to make the record.</span></span> <span data-ttu-id="bce2b-119">Si vous souhaitez obtenir des exemples avancés et des informations plus détaillées sur la syntaxe SPF prise en charge, consultez l’article [Fonctionnement de SPF contre l’usurpation et l’hameçonnage dans Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#HowSPFWorks).</span><span class="sxs-lookup"><span data-stu-id="bce2b-119">For advanced examples and a more detailed discussion about supported SPF syntax, see [How SPF works to prevent spoofing and phishing in Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#HowSPFWorks).</span></span>

<span data-ttu-id="bce2b-120">Collectez les informations ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="bce2b-120">Gather this information:</span></span>

- <span data-ttu-id="bce2b-121">L’enregistrement TXT SPF actuel pour votre domaine personnalisé, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="bce2b-121">The current SPF TXT record for your custom domain, if one exists.</span></span> <span data-ttu-id="bce2b-122">Si vous souhaitez obtenir des instructions, consultez l’article [Collectez les informations nécessaires pour créer des enregistrements DNS Office 365](https://docs.microsoft.com/microsoft-365/admin/get-help-with-domains/information-for-dns-records).</span><span class="sxs-lookup"><span data-stu-id="bce2b-122">For instructions, see [Gather the information you need to create Office 365 DNS records](https://docs.microsoft.com/microsoft-365/admin/get-help-with-domains/information-for-dns-records).</span></span>

- <span data-ttu-id="bce2b-123">Accédez à vos serveurs de messagerie et recherchez les adresses IP externes (requis pour tous les serveurs de messagerie locaux).</span><span class="sxs-lookup"><span data-stu-id="bce2b-123">Go to your messaging server(s) and find out the External IP addresses (needed from all on-premises messaging servers).</span></span> <span data-ttu-id="bce2b-124">Par exemple, **131.107.2.200**.</span><span class="sxs-lookup"><span data-stu-id="bce2b-124">For example, **131.107.2.200**.</span></span>

- <span data-ttu-id="bce2b-p106">Les noms de domaine à utiliser pour tous les domaines de tiers que vous devez inclure dans votre enregistrement TXT SPF. Certains fournisseurs de messagerie en bloc disposent de sous-domaines configurés que leurs clients peuvent utiliser. Par exemple, la société MailChimp a configuré **servers.mcsv.net**.</span><span class="sxs-lookup"><span data-stu-id="bce2b-p106">Domain names to use for all third-party domains that you need to include in your SPF TXT record. Some bulk mail providers have set up subdomains to use for their customers. For example, the company MailChimp has set up **servers.mcsv.net**.</span></span>

- <span data-ttu-id="bce2b-128">Déterminez quelle règle de mise en œuvre vous souhaitez utiliser pour votre enregistrement TXT SPF.</span><span class="sxs-lookup"><span data-stu-id="bce2b-128">Figure out what enforcement rule you want to use for your SPF TXT record.</span></span> <span data-ttu-id="bce2b-129">La règle **-all** est recommandée.</span><span class="sxs-lookup"><span data-stu-id="bce2b-129">The **-all** rule is recommended.</span></span> <span data-ttu-id="bce2b-130">Si vous souhaitez obtenir plus d’informations sur les autres options de syntaxe, consultez l’article [Syntaxe d’enregistrement TXT SPF pour Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#SPFSyntaxO365).</span><span class="sxs-lookup"><span data-stu-id="bce2b-130">For detailed information about other syntax options, see [SPF TXT record syntax for Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#SPFSyntaxO365).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="bce2b-131">Afin d'utiliser un domaine personnalisé, Office 365 exige que vous ajoutiez un enregistrement TXT SPF (Sender Policy Framework) à votre enregistrement DNS pour éviter l'usurpation.</span><span class="sxs-lookup"><span data-stu-id="bce2b-131">In order to use a custom domain, Office 365 requires that you add a Sender Policy Framework (SPF) TXT record to your DNS record to help prevent spoofing.</span></span>

## <a name="create-or-update-your-spf-txt-record"></a><span data-ttu-id="bce2b-132">Ajouter ou mettre à jour votre enregistrement TXT SPF<a name="CreateUpdateSPFTXT"></a></span><span class="sxs-lookup"><span data-stu-id="bce2b-132">Create or update your SPF TXT record <a name="CreateUpdateSPFTXT"></a></span></span>

1. <span data-ttu-id="bce2b-133">Assurez-vous que vous connaissez la syntaxe SPF du tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="bce2b-133">Ensure that you're familiar with the SPF syntax in the following table.</span></span>

   ****

   |<span data-ttu-id="bce2b-134">Élément</span><span class="sxs-lookup"><span data-stu-id="bce2b-134">Element</span></span>|<span data-ttu-id="bce2b-135">Si vous utilisez...</span><span class="sxs-lookup"><span data-stu-id="bce2b-135">If you're using...</span></span>|<span data-ttu-id="bce2b-136">Courant pour les utilisateurs ?</span><span class="sxs-lookup"><span data-stu-id="bce2b-136">Common for customers?</span></span>|<span data-ttu-id="bce2b-137">Ajoutez l’élément suivant...</span><span class="sxs-lookup"><span data-stu-id="bce2b-137">Add this...</span></span>|
   |---|---|---|---|
   |<span data-ttu-id="bce2b-138">1</span><span class="sxs-lookup"><span data-stu-id="bce2b-138">1</span></span>|<span data-ttu-id="bce2b-139">Un système de messagerie (obligatoire)</span><span class="sxs-lookup"><span data-stu-id="bce2b-139">Any email system (required)</span></span>|<span data-ttu-id="bce2b-p108">Courant. Tous les enregistrements TXT SPF commencent avec cette valeur</span><span class="sxs-lookup"><span data-stu-id="bce2b-p108">Common. All SPF TXT records start with this value</span></span>|`v=spf1`|
   |<span data-ttu-id="bce2b-142">2</span><span class="sxs-lookup"><span data-stu-id="bce2b-142">2</span></span>|<span data-ttu-id="bce2b-143">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="bce2b-143">Exchange Online</span></span>|<span data-ttu-id="bce2b-144">Courant</span><span class="sxs-lookup"><span data-stu-id="bce2b-144">Common</span></span>|`include:spf.protection.outlook.com`|
   |<span data-ttu-id="bce2b-145">3</span><span class="sxs-lookup"><span data-stu-id="bce2b-145">3</span></span>|<span data-ttu-id="bce2b-146">Exchange Online dédié uniquement</span><span class="sxs-lookup"><span data-stu-id="bce2b-146">Exchange Online dedicated only</span></span>|<span data-ttu-id="bce2b-147">Non courant</span><span class="sxs-lookup"><span data-stu-id="bce2b-147">Not common</span></span>|`ip4:23.103.224.0/19` <br> `ip4:206.191.224.0/19` <br> `ip4:40.103.0.0/16` <br> `include:spf.protection.outlook.com`|
   |<span data-ttu-id="bce2b-148">4</span><span class="sxs-lookup"><span data-stu-id="bce2b-148">4</span></span>|<span data-ttu-id="bce2b-149">Office 365 Germany, Microsoft Cloud Germany uniquement</span><span class="sxs-lookup"><span data-stu-id="bce2b-149">Office 365 Germany, Microsoft Cloud Germany only</span></span>|<span data-ttu-id="bce2b-150">Non courant</span><span class="sxs-lookup"><span data-stu-id="bce2b-150">Not common</span></span>|`include:spf.protection.outlook.de`|
   |<span data-ttu-id="bce2b-151">5</span><span class="sxs-lookup"><span data-stu-id="bce2b-151">5</span></span>|<span data-ttu-id="bce2b-152">Système de messagerie tiers</span><span class="sxs-lookup"><span data-stu-id="bce2b-152">Third-party email system</span></span>|<span data-ttu-id="bce2b-153">Non courant</span><span class="sxs-lookup"><span data-stu-id="bce2b-153">Not common</span></span>|`include:<domain_name>` <p> <span data-ttu-id="bce2b-154">\<domain_name\> est le domaine du système de messagerie tiers.</span><span class="sxs-lookup"><span data-stu-id="bce2b-154">\<domain_name\> is the domain of the third party email system.</span></span>|
   |<span data-ttu-id="bce2b-155">6</span><span class="sxs-lookup"><span data-stu-id="bce2b-155">6</span></span>|<span data-ttu-id="bce2b-p109">Système de messagerie en local. Par exemple, Exchange Online Protection et un autre système de messagerie</span><span class="sxs-lookup"><span data-stu-id="bce2b-p109">On-premises email system. For example, Exchange Online Protection plus another email system</span></span>|<span data-ttu-id="bce2b-158">Non courant</span><span class="sxs-lookup"><span data-stu-id="bce2b-158">Not common</span></span>|<span data-ttu-id="bce2b-159">Utilisez l’un des éléments suivants pour chaque système de messagerie supplémentaire :</span><span class="sxs-lookup"><span data-stu-id="bce2b-159">Use one of these for each additional mail system:</span></span> <p> `ip4:<IP_address>` <br> `ip6:<IP_address>` <br> `include:<domain_name>` <p> <span data-ttu-id="bce2b-160">\<IP_address\> et \<domain_name\> sont l’adresse IP et le domaine de l’autre système de messagerie qui envoie des e-mails au nom de votre domaine.</span><span class="sxs-lookup"><span data-stu-id="bce2b-160">\<IP_address\> and \<domain_name\> are the IP address and domain of the other email system that sends mail on behalf of your domain.</span></span>|
   |<span data-ttu-id="bce2b-161">7</span><span class="sxs-lookup"><span data-stu-id="bce2b-161">7</span></span>|<span data-ttu-id="bce2b-162">Un système de messagerie (obligatoire)</span><span class="sxs-lookup"><span data-stu-id="bce2b-162">Any email system (required)</span></span>|<span data-ttu-id="bce2b-p110">Courant. Tous les enregistrements TXT SPF se terminent par cette valeur</span><span class="sxs-lookup"><span data-stu-id="bce2b-p110">Common. All SPF TXT records end with this value</span></span>|`<enforcement rule>` <p> <span data-ttu-id="bce2b-165">Il peut s’agir de plusieurs valeurs.</span><span class="sxs-lookup"><span data-stu-id="bce2b-165">This can be one of several values.</span></span> <span data-ttu-id="bce2b-166">Nous recommandons la valeur `-all`.</span><span class="sxs-lookup"><span data-stu-id="bce2b-166">We recommend the value `-all`.</span></span>|
   |

2. <span data-ttu-id="bce2b-167">Si vous ne l’avez pas encore fait, créez votre enregistrement TXT SPF à l’aide de la syntaxe du tableau.</span><span class="sxs-lookup"><span data-stu-id="bce2b-167">If you haven't already done so, form your SPF TXT record by using the syntax from the table.</span></span>

   <span data-ttu-id="bce2b-168">Par exemple, si vous êtes entièrement hébergé par Office 365, ce qui signifie que vous n’avez aucun serveur de messagerie local, votre enregistrement TXT SPF inclut les lignes 1, 2 et 7 et se présente comme suit :</span><span class="sxs-lookup"><span data-stu-id="bce2b-168">For example, if you are fully-hosted in Office 365, that is, you have no on-premises mail servers, your SPF TXT record would include rows 1, 2, and 7 and would look like this:</span></span>

   ```text
   v=spf1 include:spf.protection.outlook.com -all
   ```

   <span data-ttu-id="bce2b-169">Il s’agit de l’enregistrement TXT SPF le plus courant.</span><span class="sxs-lookup"><span data-stu-id="bce2b-169">This is the most common SPF TXT record.</span></span> <span data-ttu-id="bce2b-170">Cet enregistrement fonctionne pratiquement dans tous les cas, peu importe que votre centre de données Microsoft se trouve aux États-Unis, en Europe (y compris en Allemagne) ou dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="bce2b-170">This record works for just about everyone, regardless of whether your Microsoft datacenter is located in the United States, or in Europe (including Germany), or in another location.</span></span>

   <span data-ttu-id="bce2b-p113">Toutefois, si vous avez acheté Office 365 Germany, un composant de Microsoft Cloud Germany, vous devez utiliser l’instruction Include de la ligne 4 au lieu de celle de la ligne 2. Par exemple, si vous êtes entièrement hébergé par Office 365 Germany, ce qui signifie que vous n’avez aucun serveur de messagerie local, votre enregistrement TXT SPF inclut les lignes 1, 4 et 7 et se présente comme suit :</span><span class="sxs-lookup"><span data-stu-id="bce2b-p113">However, if you have purchased Office 365 Germany, part of Microsoft Cloud Germany, you should use the include statement from line 4 instead of line 2. For example, if you are fully-hosted in Office 365 Germany, that is, you have no on-premises mail servers, your SPF TXT record would include rows 1, 4, and 7 and would look like this:</span></span>

   ```text
   v=spf1 include:spf.protection.outlook.de -all
   ```

   <span data-ttu-id="bce2b-173">Si vous avez déjà effectué un déploiement dans Office 365, que vous avez configuré les enregistrements TXT SPF de votre domaine personnalisé et que vous effectuez une migration vers Office 365 Germany, vous devez mettre à jour votre enregistrement TXT SPF.</span><span class="sxs-lookup"><span data-stu-id="bce2b-173">If you're already deployed in Office 365 and have set up your SPF TXT records for your custom domain, and you're migrating to Office 365 Germany, you need to update your SPF TXT record.</span></span> <span data-ttu-id="bce2b-174">Pour ce faire, remplacez `include:spf.protection.outlook.com` par `include:spf.protection.outlook.de`.</span><span class="sxs-lookup"><span data-stu-id="bce2b-174">To do this, change `include:spf.protection.outlook.com` to `include:spf.protection.outlook.de`.</span></span>

3. <span data-ttu-id="bce2b-175">Une fois que vous avez formulé votre enregistrement TXT SPF, vous devez mettre à jour l'enregistrement dans le système DNS.</span><span class="sxs-lookup"><span data-stu-id="bce2b-175">Once you have formed your SPF TXT record, you need to update the record in DNS.</span></span> <span data-ttu-id="bce2b-176">Vous ne pouvez avoir qu'un seul enregistrement TXT SPF pour un domaine.</span><span class="sxs-lookup"><span data-stu-id="bce2b-176">You can only have one SPF TXT record for a domain.</span></span> <span data-ttu-id="bce2b-177">Si un enregistrement TXT SPF existe, au lieu d'ajouter un nouvel enregistrement, vous devez mettre à jour l'enregistrement existant.</span><span class="sxs-lookup"><span data-stu-id="bce2b-177">If an SPF TXT record exists, instead of adding a new record, you need to update the existing record.</span></span> <span data-ttu-id="bce2b-178">Accédez à [Créer des enregistrements DNS pour Office 365](https://docs.microsoft.com/microsoft-365/admin/get-help-with-domains/create-dns-records-at-any-dns-hosting-provider), puis cliquez sur le lien correspondant à votre hôte DNS.</span><span class="sxs-lookup"><span data-stu-id="bce2b-178">Go to [Create DNS records for Office 365](https://docs.microsoft.com/microsoft-365/admin/get-help-with-domains/create-dns-records-at-any-dns-hosting-provider), and then click the link for your DNS host.</span></span>

4. <span data-ttu-id="bce2b-179">Testez votre enregistrement TXT SPF.</span><span class="sxs-lookup"><span data-stu-id="bce2b-179">Test your SPF TXT record.</span></span>

## <a name="how-to-handle-subdomains"></a><span data-ttu-id="bce2b-180">Comment gérer les sous-domaines ?</span><span class="sxs-lookup"><span data-stu-id="bce2b-180">How to handle subdomains?</span></span> <a name="SPFandSubdomains"></a>

<span data-ttu-id="bce2b-181">Il est important de noter que *vous devez créer un enregistrement distinct pour chaque sous-domaine, car les sous-domaines n’héritent pas de l’enregistrement SPF de leur domaine de premier niveau*.</span><span class="sxs-lookup"><span data-stu-id="bce2b-181">It is important to note that *you need to create a separate record for each subdomain as subdomains don't inherit the SPF record of their top level domain*.</span></span>

<span data-ttu-id="bce2b-182">Un enregistrement SPF (`*.`) supplémentaire est requis pour chaque domaine et sous-domaine afin d’empêcher les agresseurs d’envoyer des revendications de courrier électronique à partir de sous-domaines non existants.</span><span class="sxs-lookup"><span data-stu-id="bce2b-182">An additional wildcard SPF record (`*.`) is required for every domain and subdomain to prevent attackers from sending email claiming to be from non-existent subdomains.</span></span> <span data-ttu-id="bce2b-183">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="bce2b-183">For example:</span></span>

```text
*.subdomain.contoso.com. IN TXT "v=spf1 -all"
```

## <a name="next-steps"></a><span data-ttu-id="bce2b-184">Étapes suivantes<a name="TshootingSPF"></a></span><span class="sxs-lookup"><span data-stu-id="bce2b-184">Next steps <a name="TshootingSPF"></a></span></span>

<span data-ttu-id="bce2b-185">Vous rencontrez des problèmes avec votre enregistrement TXT SPF ?</span><span class="sxs-lookup"><span data-stu-id="bce2b-185">Having trouble with your SPF TXT record?</span></span> <span data-ttu-id="bce2b-186">Lisez [Résolution des problèmes : Meilleures pratiques pour SPF dans Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#SPFTroubleshoot).</span><span class="sxs-lookup"><span data-stu-id="bce2b-186">Read [Troubleshooting: Best practices for SPF in Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#SPFTroubleshoot).</span></span>


## <a name="what-does-spf-email-authentication-actually-do"></a><span data-ttu-id="bce2b-187">Comment fonctionne l’authentification de messagerie SPF ?</span><span class="sxs-lookup"><span data-stu-id="bce2b-187">What does SPF email authentication actually do?</span></span>

<span data-ttu-id="bce2b-188">SPF identifie les serveurs de messagerie qui sont autorisés à envoyer des messages en votre nom.</span><span class="sxs-lookup"><span data-stu-id="bce2b-188">SPF identifies which mail servers are allowed to send mail on your behalf.</span></span> <span data-ttu-id="bce2b-189">Pour résumé, SPF, ainsi que DKIM, DMARC et d’autres technologies prises en charge par Office 365, permettent d’éviter l’usurpation et l’hameçonnage.</span><span class="sxs-lookup"><span data-stu-id="bce2b-189">Basically, SPF, along with DKIM, DMARC, and other technologies supported by Office 365, help prevent spoofing and phishing.</span></span> <span data-ttu-id="bce2b-190">SPF est ajouté sous la forme d'un enregistrement TXT qui est utilisé par le système DNS afin d'identifier les serveurs de messagerie autorisés à envoyer des messages au nom de votre domaine personnalisé.</span><span class="sxs-lookup"><span data-stu-id="bce2b-190">SPF is added as a TXT record that is used by DNS to identify which mail servers can send mail on behalf of your custom domain.</span></span> <span data-ttu-id="bce2b-191">Les systèmes de messagerie électronique des destinataires peuvent se reporter à l'enregistrement TXT SPF pour déterminer si un message provenant de votre domaine personnalisé a été envoyé à partir d'un serveur de messagerie autorisé.</span><span class="sxs-lookup"><span data-stu-id="bce2b-191">Recipient mail systems refer to the SPF TXT record to determine whether a message from your custom domain comes from an authorized messaging server.</span></span>

<span data-ttu-id="bce2b-p120">Par exemple, supposons que votre domaine personnalisé contoso.com utilise Office 365. Vous ajoutez un enregistrement TXT SPF qui répertorie les serveurs de messagerie Office 365 en tant que serveurs de messagerie légitimes pour votre domaine. Lorsque le serveur de messagerie de réception reçoit un message de la part de joe@contoso.com, le serveur recherche l’enregistrement TXT SPF pour contoso.com et détermine si le message est valide. Si le serveur de réception détecte que le message provient d’un serveur autre que les serveurs de messagerie Office 365 répertoriés dans l’enregistrement SPF, le serveur de messagerie de réception peut choisir de refuser le message en le marquant comme du courrier indésirable.</span><span class="sxs-lookup"><span data-stu-id="bce2b-p120">For example, let's say that your custom domain contoso.com uses Office 365. You add an SPF TXT record that lists the Office 365 messaging servers as legitimate mail servers for your domain. When the receiving messaging server gets a message from joe@contoso.com, the server looks up the SPF TXT record for contoso.com and finds out whether the message is valid. If the receiving server finds out that the message comes from a server other than the Office 365 messaging servers listed in the SPF record, the receiving mail server can choose to reject the message as spam.</span></span>

<span data-ttu-id="bce2b-p121">En outre, si votre domaine personnalisé ne dispose pas d’un enregistrement TXT SPF, certains serveurs de réception peuvent totalement rejeter le message. En effet, le serveur de réception ne peut pas valider le fait que le message provient d’un serveur de messagerie autorisé.</span><span class="sxs-lookup"><span data-stu-id="bce2b-p121">Also, if your custom domain does not have an SPF TXT record, some receiving servers may reject the message outright. This is because the receiving server cannot validate that the message comes from an authorized messaging server.</span></span>

<span data-ttu-id="bce2b-p122">Si vous avez déjà configuré les messages pour Office 365, vous avez déjà inclus les serveurs de messagerie de Microsoft dans le système DNS sous la forme d’un enregistrement TXT SPF. Toutefois, il existe certains cas où vous devez mettre à jour votre enregistrement TXT SPF dans le système DNS. Par exemple :</span><span class="sxs-lookup"><span data-stu-id="bce2b-p122">If you've already set up mail for Office 365, then you have already included Microsoft's messaging servers in DNS as an SPF TXT record. However, there are some cases where you may need to update your SPF TXT record in DNS. For example:</span></span>

- <span data-ttu-id="bce2b-p123">Auparavant, vous deviez ajouter un autre enregistrement TXT SPF à votre domaine personnalisé, si vous utilisiez SharePoint Online. Cela n'est plus nécessaire. Ce changement doit réduire le risque que les messages de notification SharePoint Online terminent dans le dossier Courrier indésirable. Mettez votre enregistrement TXT SPF à jour si vous avez atteint la limite de 10 recherches et recevez des erreurs de type « Vous avez dépassé la limite de recherche » et « Trop de sauts ».</span><span class="sxs-lookup"><span data-stu-id="bce2b-p123">Previously, you had to add a different SPF TXT record to your custom domain if you were using SharePoint Online. This is no longer required. This change should reduce the risk of SharePoint Online notification messages ending up in the Junk Email folder. Update your SPF TXT record if you are hitting the 10 lookup limit and receiving errors that say things like, "exceeded the lookup limit" and "too many hops".</span></span>

- <span data-ttu-id="bce2b-205">Vous avez un environnement hybride avec Office 365 et Exchange en local.</span><span class="sxs-lookup"><span data-stu-id="bce2b-205">If you have a hybrid environment with Office 365 and Exchange on-premises.</span></span>

- <span data-ttu-id="bce2b-206">Vous avez l’intention de configurer DKIM et DMARC (recommandé).</span><span class="sxs-lookup"><span data-stu-id="bce2b-206">You intend to set up DKIM and DMARC (recommended).</span></span>

## <a name="more-information-about-spf"></a><span data-ttu-id="bce2b-207">En savoir plus sur SPF<a name="AdvancedSPFexs"></a></span><span class="sxs-lookup"><span data-stu-id="bce2b-207">More information about SPF <a name="AdvancedSPFexs"></a></span></span>

<span data-ttu-id="bce2b-208">Pour obtenir des exemples avancés, des informations plus détaillées sur la syntaxe SPF prise en charge, l’usurpation, la résolution des problèmes et la façon dont Office 365 prend en charge SPF, voir la section [Fonctionnement de SPF pour éviter l’usurpation et le hameçonnage dans Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#HowSPFWorks).</span><span class="sxs-lookup"><span data-stu-id="bce2b-208">For advanced examples, a more detailed discussion about supported SPF syntax, spoofing, troubleshooting, and how Office 365 supports SPF, see [How SPF works to prevent spoofing and phishing in Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#HowSPFWorks).</span></span>

## <a name="links-to-configure-dkim-and-dmarc"></a><span data-ttu-id="bce2b-209">Liens pour configurer DKIM et DMARC</span><span class="sxs-lookup"><span data-stu-id="bce2b-209">Links to configure DKIM and DMARC</span></span>

 <span data-ttu-id="bce2b-210">SPF est conçu pour lutter contre l’usurpation, mais il existe des techniques d’usurpation contre lesquelles SPF ne peut rien faire.</span><span class="sxs-lookup"><span data-stu-id="bce2b-210">SPF is designed to help prevent spoofing, but there are spoofing techniques that SPF can't protect against.</span></span> <span data-ttu-id="bce2b-211">Pour vous protéger contre ces techniques, une fois que vous avez configuré SPF, vous devez également configurer DKIM et DMARC pour Office 365.</span><span class="sxs-lookup"><span data-stu-id="bce2b-211">To defend against these, once you've set up SPF, you should configure DKIM and DMARC for Office 365.</span></span>

<span data-ttu-id="bce2b-212">L’objectif de l’authentification de messagerie [DKIM](https://docs.microsoft.com/microsoft-365/security/office-365-security/use-dkim-to-validate-outbound-email?view=o365-worldwide) est de prouver que le contenu du courrier n’a pas été falsifié.</span><span class="sxs-lookup"><span data-stu-id="bce2b-212">[DKIM](https://docs.microsoft.com/microsoft-365/security/office-365-security/use-dkim-to-validate-outbound-email?view=o365-worldwide) email authentication's goal is to prove the contents of the mail haven't been tampered with.</span></span>

<span data-ttu-id="bce2b-213">L’objectif de l’authentification de messagerie [DMARC](https://docs.microsoft.com/microsoft-365/security/office-365-security/use-dmarc-to-validate-email?view=o365-worldwide) est de s’assurer que les informations SPF et DKIM correspondent à l’adresse de l’expéditeur.</span><span class="sxs-lookup"><span data-stu-id="bce2b-213">[DMARC](https://docs.microsoft.com/microsoft-365/security/office-365-security/use-dmarc-to-validate-email?view=o365-worldwide) email authentication's goal is to make sure that SPF and DKIM information matches the From address.</span></span>